---
original: d5743926527fa819513dd67de0618253cc71d415aa78996db962b014ff9e1f7f
---

---
eip: 7618
title: ERC-5219モードWeb3 URLのコンテンツエンコーディング
description: ERC-5219解決モードで、クライアントに提供する前にリソースを圧縮解除する機能を追加する
author: Qi Zhou (@qizhou), Nicolas Deschildre (@nand2)
discussions-to: https://ethereum-magicians.org/t/erc-5219-resolve-mode/14088
status: Draft
type: Standards Track
category: ERC
created: 2024-02-08
requires: 5219, 6944
---

## 概要

[ERC-6860](./eip-6860.md) `web3://`標準の文脈において、このERCは[ERC-6944](./eip-6944.md)解決モードを拡張します。この標準では、`request()`呼び出しによって返されたレスポンスに`Content-Encoding`ヘッダーが含まれている場合、指定されたアルゴリズムに従って返されたデータを必要に応じて復号化してからクライアントに返すことを規定しています。

## 動機

ブロックチェーンでのストレージは高価であるため、圧縮されたアセットを保存および提供することが最適です。標準のHTTPでは、クライアントが対応する圧縮アルゴリズムを指定する`Accept-Encoding`/`Content-Encoding`メカニズムが使用されますが、ブロックチェーンのストレージと計算の制約から、この仕組みを`web3://`プロトコルに複製するのは最適ではありません。さらに、固定の`Content-Encoding`ヘッダーを持つコンテンツを盲目的に提供することはできません。なぜなら、HTTPクライアントが圧縮アルゴリズムを実装していない可能性があるためです。

サポートされる圧縮アルゴリズムのリストを指定し、必要に応じてプロトコル側で解凍を行い、クライアントにデータを提供することで、圧縮されたデータを安全に保存および提供できます。

## 仕様

[ERC-6944](./eip-6944.md)解決モードでは、この標準は、返された`headers`の`KeyValue`配列に`Content-Encoding`HTTPヘッダーが提供されている場合、かつクライアントが`Accept-Encoding`ヘッダーで提供したアルゴリズムに含まれていない場合、またはクライアントが`Accept-Encoding`ヘッダーを提供していない場合、プロトコルがコンテンツを解凍してから`web3://`クライアントに転送しなければならないことを示しています。

プロトコルは、次のコンテンツエンコーディングをサポートしなければなりません: `gzip`、`br`(brotli)。プロトコルがコンテンツを解凍する必要がある場合で、広告された`Content-Encoding`がこのリストに含まれていない場合、サポートされていないコンテンツエンコーディングを示すエラーをクライアントに送信しなければなりません。解凍後、解凍されたデータがクライアントに送信されます。プロトコルがコンテンツを解凍する場合、`Content-Encoding`ヘッダーはクライアントに転送されてはなりません。

## 根拠

この機能を[ERC-6944](./eip-6944.md)解決モードに追加するのは、インターフェイスを変更することなく追加できるためです。
標準HTTPに可能な限り近づけるため、新しいHTTPヘッダーを導入せず、既知の`Content-Encoding`ヘッダーを再利用します。

## セキュリティ上の考慮事項

セキュリティ上の懸念は見つかりませんでした。

## 著作権

著作権およびそれに関連する権利は[CC0](../LICENSE.md)によって放棄されています。