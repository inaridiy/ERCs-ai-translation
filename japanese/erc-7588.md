---
original: 5bad15fd67d87c8798b4798d4d1b7e902d8d94db64cb69bb1127131eb14c103a
---

---
eip: 7588
title: Blob Transactions Metadata JSON Schema
description: Blob トランザクションにメタデータを添付する
author: Gavin Fu (@gavfu), Leo Wang (@wanglie1986), Bova Chen (@appoipp), Aiden X (@4ever9)
discussions-to: https://ethereum-magicians.org/t/erc7588-attaching-metadata-to-blobs-carried-by-blob-transactions/17873
status: Review
type: Standards Track
category: ERC
created: 2024-01-01
requires: 4844
---

## 概要

このEIPは、[EIP-4844](./eip-4844.md)で概説されているblobトランザクションに添付されるメタデータの標準を導入します。メタデータはあらかじめ定義されたスキーマに準拠したJSONオブジェクトとして表現され、その文字列表現がblobトランザクションのデータフィールドに配置されます。

## 動機

[EIP-4844](./eip-4844.md)は、「blobトランザクション」と呼ばれる新しいタイプのトランザクションを定義しています。これらのトランザクションには、blobとそのKZGコミットメントおよびプルーフのリストが含まれています。blobトランザクションは、レイヤー2のトランザクションデータをイーサリアムレイヤー1に投稿するためのメカニズムとして機能します。

ロールアップは通常、自分がポストしたblobトランザクションを管理しますが、Portal Networkやblobscanなどのサードパーティソリューションも、イーサリアムに投稿されたすべてのblobをインデックス化し、blobの照会サービスを提供する可能性があります。オリジネーター、説明、コンテンツタイプなどのメタデータを添付することで、これらのデータ構造の可視性と監査性を大幅に向上させることができます。

さらに、分散型ストレージアプリケーションは、blobトランザクションを使ってユーザーデータをイーサリアムに投稿し、オフチェーンでblobを同期およびストアし、将来取り出せるようにすることができます。メタデータの追加により、刻印やその他の創造的な使用例を含む、新しいアプリケーションの可能性が開かれます。

## 仕様

### メタデータJSONスキーマ

メタデータはJSONオブジェクトとして表現され、次のJSONスキーマに準拠しています:

```json
{
    "title": "Blobs Metadata",
    "type": "object",
    "properties": {
        "originator": {
            "type": "string",
            "description": "運ばれたblobsの発信元を識別する"
        },
        "description": {
            "type": "string",
            "description": "blobsの内容を説明する"
        },
        "content_type": {
            "type": "string",
            "description": "blobsのMIMEタイプを記述する。MIMEタイプはRFC 2046 (https://www.rfc-editor.org/rfc/rfc2046)で定義されている必要がある"
        },
        "extras": {
            "type": "string",
            "description": "blobsに関連する動的な追加情報"
        },
        "blobs": {
            "type": "array",
            "description": "i番目のblobのメタデータ。これはオプションであり、提供された場合は上位レベルのプロパティをオーバーレイする",
            "items": {
                "description": {
                    "type": "string",
                    "description": "i番目のblobの内容を説明する"
                },
                "content_type": {
                    "type": "string",
                    "description": "i番目のblobのMIMEタイプを記述する。MIMEタイプはRFC 2046 (https://www.rfc-editor.org/rfc/rfc2046)で定義されている必要がある"
                },
                "extras": {
                    "type": "string",
                    "description": "i番目のblobに関連する動的な追加情報"
                },
            }
        }
    }
}
```

例えば、Vitalikが「データ可用性サンプリング」について説明するblobトランザクションを送信したい場合、最初のblobにテキストの説明を、2番目のblobに図解イメージを含めることができます。対応するメタデータJSONオブジェクトは次のようになります:

```json
{
    "originator": "Vitalik Buterin",
    "description": "データ可用性サンプリングの図解",
    "blobs": [
      {
        "content_type": "text/plain",
        "description": "このblobには図解の説明テキストが含まれています。"
      },
      {
        "content_type": "image/png",
        "description": "このblobにはbase64形式の図解イメージデータが含まれています。これはRFC 2397 (https://www.rfc-editor.org/rfc/rfc2397)のデータURLです。"
      },
    ]
  }
```

完全なblobトランザクションには、他の関連フィールドとともに、このメタデータがデータフィールドに含まれます:

```json
{
  "blobVersionedHashes": ["0x...", "0x..."],
  "chainId": 11155111, // blobトランザクションがSepoliaに投稿されたと仮定
  "type": "eip4844",
  "to": "0x0000000000000000000000000000000000000000",
  "gas": 28236,
  "data": "0x..", // 上記のメタデータJSONオブジェクトの文字列表現
  "nonce": 18,
  "maxFeePerBlobGas": 1073677089,
  "maxFeePerGas": 1213388073,
  "maxPriorityFeePerGas": 1165808679,
  "sidecars": [
    { "blob": "0x...", "commitment": "0x...", "proof": "0x..." },
    { "blob": "0x...", "commitment": "0x...", "proof": "0x..." }
  ]
}
```

### Blobトランザクションの封筒

blobトランザクションのコールデータ(つまりデータフィールド)は、UTF-8でエンコードされたメタデータJSONオブジェクトの文字列表現に設定する必要があります。

## 根拠

イーサリアムエコシステムでは、さまざまなタイプのトランザクションが存在し、それぞれ異なる目的に役立ちます。これらのトランザクションのデータフィールドの使用方法は次のようになります:

- **通常の資金移動トランザクション**:
これらのトランザクションでは、データフィールドは通常使用されず、ユーザーは任意のデータを含めることができます。
- **スマートコントラクトデプロイメントトランザクション**:
スマートコントラクトをデプロイするために使用されます。データフィールドには、コントラクトバイトコードと、コンストラクターで必要な任意のエンコードされた引数が含まれます。
- **スマートコントラクト関数呼び出しトランザクション**:
スマートコントラクト関数を呼び出す際に使用されます。データフィールドには、関数シグネチャと必要なパラメーターなどの関数呼び出しデータが含まれます。

blobトランザクションは特にblobの投稿用に設計されており、通常はデータフィールドが使用されません。このEIPは、データフィールドを使ってblobに添付されるメタデータを提案しています。これにより、blobトランザクションの監査性と使いやすさを向上させることができます。

ただし、blobトランザクションがスマートコントラクト関数を呼び出す必要がある場合もあることに注意が必要です。分散型ストレージアプリケーションが、blobのバージョンハッシュやMIMEタイプなどのメタデータを追跡するためにスマートコントラクトを使用する場合を考えてみましょう。このような場合、ユーザーはblobを含むblobトランザクションを送信しながら、データフィールドを使ってそれらのblobのバージョンハッシュとMIMEタイプを保存するためのスマートコントラクト関数を呼び出すことができます。このEIPはこのような特定の使用例をカバーしていないことに注意が必要です。

## 下位互換性

このEIPは[EIP-4844](./eip-4844.md)と下位互換性があります。blobトランザクションの構造や機能を変更するのではなく、オプションのメタデータフィールドを追加するだけです。

## セキュリティ上の考慮事項

このEIPは新しいセキュリティリスクや脆弱性を導入しません。メタデータは情報提供のみのフィールドであり、blobトランザクションの実行や有効性に影響を与えません。ただし、ユーザーやアプリケーションは次の潜在的な問題に注意する必要があります:

- メタデータはコンセンサスレイヤーによって検証または強制されるものではないため、正確または信頼できない可能性があります。ユーザーやアプリケーションは、重要または機密の操作にメタデータを依存せず、blobの内容とソースを常に確認する必要があります。

- メタデータには、スパム、フィッシング、マルウェアなどの悪意のあるデータが含まれている可能性があります。ユーザーやアプリケーションは、メタデータを盲目的に信頼または実行せず、使用する前にメタデータをスキャンして無害化する必要があります。

- メタデータにより、データフィールドにより多くのデータが含まれるため、blobトランザクションのガスコストが増加する可能性があります。ユーザーやアプリケーションは、メタデータの利点とコストのバランスを取り、ガスコストを削減するためにメタデータのサイズと形式を最適化する必要があります。

## 著作権

著作権およびそれに関連する権利は[CC0](../LICENSE.md)によって放棄されています。