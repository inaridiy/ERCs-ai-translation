---
original: 7161df678e8cab585bf3d269bf11d58171ba22c61954b9ffd76e66fc50268132
---

---
eip: 1844
title: ENS インターフェース発見
author: Nick Johnson (@arachnid)
discussions-to: https://ethereum-magicians.org/t/ens-interface-discovery/2924
status: 停滞
type: Standards Track
category: ERC
created: 2019-03-15
requires: 137, 165
---

## 簡単な要約
ENS 名称およびアドレス (通常はコントラクトアドレス) に関連付けられたコントラクトインターフェースを関連付ける方法と、それらのインターフェースを発見する方法を定義します。

## 概要
このEIPは、ENS 名称またはアドレス (通常はコントラクトアドレス) に関連付けられたインターフェースを公開し、アプリケーションがそれらのインターフェースを発見して対話できるようにする方法を規定しています。インターフェースは、ターゲットコントラクト (存在する場合) または他のコントラクトによって実装できます。

## 動機
EIP 165はインターフェース発見 - 特定のアドレスのコントラクトが要求されたインターフェースをサポートしているかどうかを判断する - をサポートしています。しかし、多くの場合、名称またはアドレスに関連付けられた他のコントラクトによって実装された機能を発見できるようにすることが有用です。

例えば、トークンコントラクト自体が「アトミックスワップ」機能を提供しない場合でも、関連するコントラクトがそれを提供している可能性があります。ENS インターフェース発見を使用すると、トークンコントラクトはこのメタデータを公開し、アプリケーションにその機能の場所を通知できます。

## 仕様
ENS リゾルバーの新しいプロファイルが定義されており、次のメソッドで構成されています:

```solidity
function interfaceImplementer(bytes32 node, bytes4 interfaceID) external view returns (address);
```

このインターフェースのEIP-165 インターフェースIDは `0xb8f2bbb4` です。

ENS ノードハッシュ `node` とEIP-165 `interfaceID` を受け取ると、このメソッドは、その インターフェースの適切な実装者のアドレスを返します。そのノードに一致するインターフェースIDがない場合は、0が返されます。

`interfaceImplementer` によって返されるアドレスは、スマートコントラクトを指す必要があります。

返されたアドレスのスマートコントラクトは、EIP-165を実装する必要があります。

このインターフェースを実装するリゾルバーは、フォールバック戦略を利用してもよい: ユーザーが明示的に提供したインターフェースが一致しない場合、`addr()` によって返されるコントラクトを照会し、要求されたインターフェースがそのコントラクトによってサポートされている場合はそのアドレスを返し、そうでない場合は0を返す。これを行う場合、ターゲットコントラクトがリバートした場合でも、0を返す必要があります。

このフィールドは、順方向解決と逆方向解決の両方で使用できます。

## 根拠

この問題に対する単純なアプローチは、このメソッドをターゲットコントラクトに直接追加することです。ただし、これを行うと次のような欠点があります:

1. 各コントラクトは独自のインターフェース実装リストを維持する必要があります。
2. このリストを変更するには、コントラクトが以前必要としていなかったアクセス制御が必要です。
3. このサポートは、コントラクトの作成時に設計する必要があり、事後的に組み込むことはできません。
4. 1つのカノニカルなインターフェースリストしかサポートできません。

代わりにENSリゾルバーを使用すると、これらの欠点を軽減できます。これにより、以前からこの機能を組み込んでいないコントラクトでも、誰でもインターフェースを名称に関連付けることができます。

## 下位互換性
下位互換性の問題はありません。

## テストケース
TBD

## 実装
[ensdomains/resolvers](https://github.com/ensdomains/resolvers/) リポジトリの PublicResolver がこのインターフェースを実装しています。

## 著作権
著作権およびそれに関連する権利は [CC0](../LICENSE.md) によって放棄されています。