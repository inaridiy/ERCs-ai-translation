---
original: 59d621bb5ad76abab819e014b5cf2e689603a5d8b9bcf953f84cda0d9b02db62
---

---
eip: 6047
title: ERC-721 Balance indexing via Transfer event
description: ERC-721 NFTのコントラクト作成時にTransferイベントを発行することを義務付ける
author: Zainan Victor Zhou (@xinbenlv)
discussions-to: https://ethereum-magicians.org/t/eip-xxx-require-erc721-to-always-emit-transfer/11894
status: Stagnant
type: Standards Track
category: ERC
created: 2022-11-26
requires: 721
---

## 概要

このEIPは[ERC-721](./eip-721.md)を拡張し、コントラクト作成時にあらかじめ存在するイベントを発行することで、NFTの追跡とインデックス化を可能にします。

ERC-721では、転送や作成(つまり`0x0`からの転送)、または焼却(つまり`0x0`への転送)が発生するたびに、`Transfer`イベントを発行する必要がありますが、**コントラクト作成時は例外とされています**。このEIPでは、コントラクト作成時も含め、常に`Transfer`イベントを発行することを義務付けます。

## 動機

[ERC-721](./eip-721.md)では、転送や作成(つまり`0x0`からの転送)、または焼却(つまり`0x0`への転送)が発生するたびに、`Transfer`イベントを発行する必要がありますが、**コントラクト作成時は例外とされています**。このため、コントラクト作成時にNFTをミントしても、イベントは発行されません。一方、[ERC-1155](./eip-1155.md)標準では、ミントがコントラクト作成時か否かに関わらず、必ずイベントを発行することが義務付けられています。これにより、インデックスサービスや他のオフチェーンサービスが、トークンの作成を確実に把握し、記録することができます。

このEIPでは、ERC-721が認めていたこの例外を削除し、ERC-721でもコントラクト作成時に`Transfer`イベントを発行することを義務付けます。これにより、インデックサーやオフチェーンアプリケーションは、ERC-721の`Transfer`イベントログのみを頼りに、トークンのミント、焼却、転送を追跡できるようになります。

## 仕様

この文書における「MUST」、「MUST NOT」、「REQUIRED」、「SHALL」、「SHALL NOT」、「SHOULD」、「SHOULD NOT」、「RECOMMENDED」、「NOT RECOMMENDED」、「MAY」、「OPTIONAL」のキーワードは、RFC 2119およびRFC 8174に記載されている通り解釈されるものとします。

1. 準拠するコントラクトは、[ERC-721](./eip-721.md)を実装しなければならない(MUST)
2. 準拠するコントラクトは、トークンが転送、ミント(つまり`0x0`からの転送)、または焼却(つまり`0x0`への転送)された場合、**コントラクト作成時も含めて**、必ず`Transfer`イベントを発行しなければならない(MUST)

## 根拠

新しいイベント(例えば`Creation`)を作成するのではなく、既存の`Transfer`イベントを使うことで、このEIPは既存のインデックサーとの下位互換性を保つことができます。

## 下位互換性

このEIPに準拠するすべてのコントラクトはERC-721にも準拠しています。ただし、ERC-721に準拠しているすべてのコントラクトがこのEIPに準拠しているわけではありません。

## セキュリティ上の考慮事項

新たなセキュリティ上の懸念はありません。

## 著作権

著作権およびそれに関連する権利は[CC0](../LICENSE.md)によって放棄されています。