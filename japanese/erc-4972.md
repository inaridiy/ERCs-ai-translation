---
original: 91acff1e10ffb9d5dcf85eeaf682cfb5af41750b6e31243796da939c9028ea4d
---

---
eip: 4972
title: 名称所有アカウント
description: ソーシャルアイデンティティのための名称所有アカウント
author: Shu Dong (@dongshu2013)、Qi Zhou (@qizhou)、Zihao Chen (@zihaoccc)
discussions-to: https://ethereum-magicians.org/t/eip-4972-name-owned-account/8822
status: ドラフト
type: 標準トラック
category: ERC
created: 2022-04-04
requires: 137
---

## 概要

このERCは、人間可読のアイデンティティを単一のスマートコントラクトアカウントにリンクさせることで、名称サービス(例えばENS)の機能を拡張することを提案しています。このアカウントは名称のオーナーによって管理されます。

## 動機

名称自体は文脈を持つことができません。私たちは名称サービスの拡張を構築し、各名称オーナーに使い捨てのスマートコントラクトアカウントを提供することで、名称に豊かな文脈を与えたいと考えています。これにより、スマートコントラクトアカウントの一般的な採用が促進されることが期待されます。NOA(名称所有アカウント)を使うことで、名称ノードの資産や情報を保持できるようになり、名称ノードの所有権移転などの新しいユースケースが開けます。

## 仕様

この文書における「MUST」、「MUST NOT」、「REQUIRED」、「SHALL」、「SHALL NOT」、「SHOULD」、「SHOULD NOT」、「RECOMMENDED」、「MAY」、「OPTIONAL」というキーワードは、RFC 2119に記載されているように解釈されるものとします。

### 名称所有アカウント

NOAには以下の要素があります:

- [ERC-137](./eip-137.md)で定義された人間可読の名称
- 名称から派生したアドレスを持つスマートコントラクトアカウント(NOA)
- 名称サービスによって保証された名称オーナー(複数可)がNOAをデプロイおよび操作できる

以下の図は、名称ノード、NOA、名称オーナーの関係を示しています。名称サービスによって所有権が保証されています。

      ┌───────────────┐        ┌───────────┐         ┌───────────────┐
      │ 所有アカウント ◄──own───┤ 名称ノード ◄───own───┤   名称オーナー  │
      └───────────────┘        └───────────┘         └───────────────┘

### インターフェース

名称サービスに必要なコアインターフェースは以下の通りです:

	interface INameServiceRegistry {
	    /// @notice 名称ノードによって所有されているアカウントアドレスを取得する
	    /// @params node 名称ノードを表す
	    /// @return アカウントのアドレス
	    function ownedAccount(
	        bytes32 node
	    ) external view returns(address);
	}

名称所有アカウントに必要なコアインターフェースは以下の通りです:

	interface INameOwnedAccount {
	    /// @notice このアカウントアドレスにマッピングされている名称ノードを取得する
	    /// @return 名称ノード
	    function name() external view returns(bytes32);

	    /// @notice 名称が登録されている名称サービスコントラクトアドレスを取得する
	    /// @return 名称が登録されている名称サービス
	    function nameService() external view returns(address);
	}

## 根拠

名称とNOAを1対1で対応させるために、各NOAのアドレスは名称ノードから派生させる必要があります。そのため、各NOAには名称ノード情報を含める必要があります。"name()"関数を使うことで、NOAの名称ノードの所有権を確認できます。"nameService()"関数を使うことで、名称が登録されている名称サービスコントラクトアドレスを取得でき、検証などの処理を行えます。これらの2つのメソッドにより、NOAは実際の名称ノードのオーナーにまでさかのぼることができます。

## 下位互換性

名称レジストリのインターフェースはERC-137と互換性があります。

## リファレンス実装

### 名称所有アカウントの作成

NOAの作成は"ファクトリー"コントラクトによって行われます。ファクトリーは名称サービス自体である可能性があり、CREATE2(CREATE ではない)を使ってNOAを作成することが期待されます。NOAは同一のイニットコードとファクトリーコントラクトを持つ必要があり、これにより名称とその所有アカウントの1対1の対応が保証されます。名称ノードをソルトとして使うことで、この関係を確実にできます。

## セキュリティ上の考慮事項

特に考慮すべきセキュリティ上の問題はありません。

## 著作権

著作権およびそれに関連する権利は[CC0](../LICENSE.md)によって放棄されています。