---
original: 6bfbe230e5297cd4905a6c17565bf3f4582ef022534ea76996ca0f80ecaeddb9
---

---
eip: 2678
title: 改訂されたEthereum スマートコントラクトパッケージング標準 (EthPM v3)
author: g. nicholas d'andrea (@gnidan), Piper Merriam (@pipermerriam), Nick Gheorghita (@njgheorghita), Christian Reitwiessner (@chriseth), Ben Hauser (@iamdefinitelyahuman), Bryant Eisenbach (@fubuloubu)
discussions-to: https://ethereum-magicians.org/t/ethpm-v3-specification-working-group/4086
status: 最終
type: 標準トラック
category: ERC
created: 2020-05-26
---


## 簡単な要約

スマートコントラクトソフトウェアパッケージを記述するデータフォーマット。


## 概要

このEIPは、1つ以上のスマートコントラクトのパッケージを表すパッケージマニフェストドキュメントのデータフォーマットを定義します。オプションとして、ソースコードや複数のネットワーク上の展開されたインスタンスを含むことができます。パッケージマニフェストは、IPFS などのコンテンツアドレス可能なストレージネットワークを介して配布される最小化されたJSONオブジェクトです。パッケージは、[EIP-1319](./eip-1319.md)で定義されたオンチェーンのEthPMレジストリに公開され、自由にアクセスできるようになります。

このドキュメントは、このフォーマットのバージョン**3**の正式な仕様の自然言語による説明を提示します。


## 動機

この標準は、Ethereumの開発エコシステムにおけるコード再利用に関するソフトウェアのベストプラクティスを奨励することを目的としています。オープンで、コミュニティ主導のパッケージデータフォーマット標準を定義することで、一般的な解決策を提供し、パッケージ管理ツールの開発をサポートすることを目指しています。

-   *パッケージマニフェスト*のスキーマを更新し、コンパイラの[メタデータ](https://solidity.readthedocs.io/en/latest/metadata.html)出力と互換性を持たせます。
-   `"sources"`オブジェクトの定義を更新し、より幅広い種類のソースファイルタイプをサポートし、コンパイラの[JSONインプット](https://solidity.readthedocs.io/en/latest/using-the-compiler.html#compiler-input-and-output-json-description)として機能するようにします。
-   コンパイラ定義を`"compilers"`配列の最上位に移動することで以下を実現します:
	-   コンパイラバージョン、ソース、コンパイルされたアセットの間のリンクを簡素化。
	-   複数のコンパイラバージョンを使用するパッケージを簡素化。
-   [JSON規約](https://google.github.io/styleguide/jsoncstyleguide.xml?showone=Property_Name_Format#Property_Name_Format)に合わせて、キーの書式を`snake_case`から`camelCase`に更新。

### 指導原則

この仕様は、ドキュメントのライフサイクルについて以下の前提を置いています。

1.  パッケージマニフェストは、リリースプロセスの一部としてパッケージ管理ソフトウェアによって自動的に生成されることを意図しています。

2.  パッケージマニフェストは、パッケージの依存関係のインストールや新しいリリースのビルドとデプロイなどのタスクを実行する際に、パッケージマネージャーによって消費されます。

3.  パッケージマニフェストは通常、ソースコードと一緒に保存されるのではなく、パッケージレジストリによって*または*パッケージレジストリによって参照され、IPFSなどのものに保存されます。

4.  パッケージマニフェストを使用して、ソースコントラクトの公開デプロイメントを検証できます。

### ユースケース

この仕様の作成中に、以下のユースケースが考慮されました。

* **owned**: 自身で使用するのではなく、他のコントラクトが継承して機能を提供するためのベースコントラクトを含むパッケージ。
* **transferable**: 単一の依存関係を持つパッケージ。
* **standard-token**: 再利用可能なコントラクトを含むパッケージ。
* **safe-math-lib**: パッケージのコントラクトの1つのデプロイインスタンスを含むパッケージ。
* **piper-coin**: 依存関係から再利用可能なコントラクトのデプロイインスタンスを含むパッケージ。
* **escrow**: ローカルライブラリのデプロイインスタンスにリンクされたローカルコントラクトのデプロイインスタンスを含むパッケージ。
* **wallet**: 依存関係のライブラリのデプロイインスタンスにリンクされたローカルコントラクトのデプロイインスタンスを含むパッケージ。
* **wallet-with-send**: 深い依存関係にリンクされたデプロイインスタンスを含むパッケージ。
* **simple-auction**: コンパイラ`"metadata"`フィールドの出力。

## パッケージ仕様

### 規約

#### RFC2119

この文書の中で使用される "MUST"、"MUST NOT"、"REQUIRED"、"SHALL"、"SHALL NOT"、"SHOULD"、"SHOULD NOT"、"RECOMMENDED"、"MAY"、"OPTIONAL" というキーワードは、RFC 2119に記載されているように解釈されるものとします。

-   <https://www.ietf.org/rfc/rfc2119.txt>


#### プレフィックス付きとプレフィックスなし

[プレフィックス付き](#prefixed)の16進数値は`0x`から始まります。[プレフィックスなし](#unprefixed)の値には接頭辞がありません。特に指定がない限り、すべての16進数値は`0x`プレフィックスを使用して表現**する必要があります**。

* **プレフィックス付き**: `0xdeadbeef`
* **プレフィックスなし**: `deadbeef`

### ドキュメントフォーマット

正式なフォーマットは単一のJSONオブジェクトです。パッケージは以下の直列化ルールに準拠**する必要があります**。

-   ドキュメントは**必ず**コンパクトにパックされ、改行や余分な空白がないようにする必要があります。

-   すべてのオブジェクト内のキーは**必ず**アルファベット順に並べる必要があります。

-   同じオブジェクト内での重複キーは無効です。

-   ドキュメントは**必ず** [UTF-8](https://en.wikipedia.org/wiki/UTF-8)エンコーディングを使用する必要があります。

-   ドキュメントの最後に改行を入れてはいけません。

-   下位互換性を確保するために、`manifest_version`はトップレベルのキーとして禁止されています。


### ドキュメント仕様

パッケージ用に以下のフィールドが定義されています。カスタムフィールドを**含めることができます**。カスタムフィールドには将来のバージョンの仕様との名前の衝突を避けるため、`x-`プレフィックスを付ける**必要があります**。

* **参照**: この仕様の正式な([JSON-Schema](https://json-schema.org))バージョン: [package.spec.json](../assets/eip-2678/package.spec.json)
* **ジャンプ先**: [定義](#object-definitions)

### EthPMマニフェストバージョン

`manifest`フィールドは、このドキュメントが準拠する仕様バージョンを定義します。

-   パッケージ**は必ず**このフィールドを含める必要があります。

* **必須**: はい
* **キー**: `manifest`
* **型**: 文字列
* **許可された値**: `ethpm/3`

### パッケージ名

`name`フィールドは、このパッケージの人間可読の名前を定義します。

-   パッケージ**は、EthPMレジストリにリリースする場合、このフィールドを含める必要があります**。

-   パッケージ名**は小文字で始まり、小文字のa-z、数字0-9、およびダッシュ文字-のみで構成**される必要があります。

-   パッケージ名**は255文字を超えてはいけません**。

* **必須**: `version`が含まれている場合。
* **キー**: `name`
* **型**: 文字列
* **フォーマット**: 正規表現`^[a-z][-a-z0-9]{0,255}You are tasked with translating a technical Markdown document from English to a specified target language. Your goal is to produce an accurate and natural-sounding translation while preserving the original Markdown formatting and technical terminology.

Here is the Markdown document to be translated:

<markdown_document>
`に一致**する必要があります**。

### パッケージバージョン

`version`フィールドは、このリリースのバージョン番号を宣言します。

-   パッケージ**は、EthPMレジストリにリリースする場合、このフィールドを含める必要があります**。

-   この値**は[semver](http://semver.org/)バージョン番号付け仕様に準拠**する必要があります。

* **必須**: `name`が含まれている場合。
* **キー**: `version`
* **型**: 文字列

### パッケージメタデータ

`meta`フィールドは、パッケージのインストールに不可欠ではないが、他の理由で重要または便利な可能性のあるメタデータの場所を定義します。

-   このフィールド**はすべてのパッケージに含める必要があります**。

* **必須**: いいえ
* **キー**: `meta`
* **型**: [パッケージメタオブジェクト](#the-package-meta-object)

### ソース

`sources`フィールドは、このリリースに含まれる[コントラクトタイプ](#contract-type)をすべて再コンパイルするために必要な完全なソースツリーを定義します。

* **必須**: いいえ
* **キー**: `sources`
* **型**: オブジェクト (文字列: [ソースオブジェクト](#the-source-object))

### コントラクトタイプ

`contractTypes`フィールドは、このリリースに含まれている[コントラクトタイプ](#contract-type)をホストします。

-   パッケージ**は、このパッケージのソースファイルに見つかるコントラクトタイプのみを含める必要があります**。

-   パッケージ**は依存関係のコントラクトタイプを含めてはいけません**。

-   パッケージ**は抽象コントラクトをリリースのコントラクトタイプセクションに含めてはいけません**。

* **必須**: いいえ
* **キー**: `contractTypes`
* **型**: オブジェクト (文字列: [コントラクトタイプオブジェクト](#the-contract-type-object))
* **フォーマット**: キー**は有効な[コントラクトエイリアス](#contract-alias)でなければなりません。<br>値**は[コントラクトタイプオブジェクト](#the-contract-type-object)の定義に準拠する必要があります**。

### コンパイラ

`compilers`フィールドには、このリリースに含まれる様々な`contractTypes`の出力を生成するために使用されたコンパイラとその設定に関する情報が含まれています。

* **必須**: いいえ
* **キー**: `compilers`
* **型**: 配列 ([コンパイラ情報オブジェクト](#the-compiler-information-object))

### デプロイメント

`deployments`フィールドには、このリリースが[コントラクトインスタンス](#contract-instance)としてデプロイされているチェーンの情報と、それらのデプロイされたコントラクトインスタンスの[コントラクトタイプ](#contract-type)およびその他のデプロイメントの詳細が含まれています。このオブジェクトのキーとなる[BIP122 URI](#bip122-uri)で定義されたチェーンのセットは**必ず**一意でなければなりません。同じブロックチェーンを表す2つの異なるURIキーをデプロイメントフィールドに含めることはできません。

* **必須**: いいえ
* **キー**: `deployments`
* **型**: オブジェクト (文字列: オブジェクト(文字列: [コントラクトインスタンスオブジェクト](#the-contract-instance-object)))
* **フォーマット**: キー**は有効なBIP122 URIチェーン定義でなければなりません**。<br>値**は以下の形式に準拠するオブジェクトでなければなりません**:<br>- キー**は有効な[コントラクトインスタンス名](#contract-instance-name)でなければなりません<br>- 値**は有効な[コントラクトインスタンスオブジェクト](#the-contract-instance-object)でなければなりません**

### ビルド依存関係

`buildDependencies`フィールドは、このプロジェクト
が依存するEthPMパッケージのキー/値マッピングを定義します。

* **必須**: いいえ
* **キー**: `buildDependencies`
* **型**: オブジェクト (文字列: 文字列)
* **フォーマット**: キー**は有効な[パッケージ名](#package-name)でなければなりません**。<br>値**は、親と同じEthPMマニフェストバージョンに準拠するパッケージを解決する[コンテンツアドレス可能なURI](#content-addressable-uri)でなければなりません**。

### オブジェクト定義

パッケージ内で使用される異なるオブジェクトの定義。すべてのオブジェクトにカスタムフィールドを含めることができます。カスタムフィールドには将来の仕様バージョンとの名前の衝突を避けるため、`x-`プレフィックスを付ける**必要があります**。


### *リンク参照*オブジェクト

[リンク参照](#link-reference)オブジェクトには以下のキー/値ペアがあります。すべてのリンク参照は、対応する[バイトコード](#bytecode)に関連付けられていると見なされます。

#### オフセット: `offsets`

`offsets`フィールドは、バイトコード内のリンク参照が出現する位置に対応する整数の配列です。位置は、対応するバイトコードの先頭から0インデックスで表されます。このフィールドは、参照位置がバイトコードの終端を超える場合は無効です。

* **必須**: はい
* **型**: 配列

#### 長さ: `length`

`length`フィールドは、リンク参照の長さをバイトで定義する整数です。このフィールドは、定義されたリンク参照の終端がバイトコードの終端を超える場合は無効です。

* **必須**: はい
* **型**: 整数

#### 名前: `name`

`name`フィールドは、[識別子](#identifier)として有効な文字列です。同じリンク値でリンクされるべきすべてのリンク参照には、同じ名前を付ける**必要があります**。

* **必須**: いいえ
* **型**: 文字列
* **フォーマット**: [識別子](#identifier)フォーマットに**準拠する必要があります**。

### *リンク値*オブジェクト

単一の[リンク値](#link-value)を記述します。

**リンク値オブジェクト**は、以下のキー/値ペアで定義されます。


#### オフセット: `offsets`

`offsets`フィールドは、対応するバイトコード内の`value`が書き込まれた場所を定義します。これらの位置は、対応するバイトコードのバイト表現の先頭から0インデックスで表されます。

* **必須**: はい
* **型**: 整数
* **フォーマット**: 以下の通り。

フォーマット

整数の配列で、各整数は以下のすべてを満たす必要があります。

-   ゼロ以上

-   対応するバイトコードの非プレフィックス16進数表現の長さより厳密に小さい

#### タイプ: `type`

`type`フィールドは、対応するバイトコードを[リンク](#linking)する際に何がエンコードされるかを決定するための`value`タイプを定義します。

* **必須**: はい
* **型**: 文字列
* **許可された値**: `"literal"`はバイトコードリテラルの場合。<br>`"reference"`は[コントラクトインスタンス](#contract-instance)への名前付き参照の場合

#### 値: `value`

`value`フィールドは、対応するバイトコードを[リンク](#linking)する際に書き込まれるべき値を定義します。

* **必須**: はい
* **型**: 文字列
* **フォーマット**: `type`に基づいて決まります。以下を参照。

フォーマット

静的値*リテラル*(例: アドレス)の場合、値は**バイトを表す0x接頭辞付き16進数文字列**でなければなりません。

現在のパッケージ内の[コントラクトインスタンス](#contract-instance)のアドレスを参照するには、その契約インスタンスの名前を使用する必要があります。

-   この値**は有効な[コントラクトインスタンス名](#contract-instance-name)でなければなりません**。

-   この値が属するチェーン定義には、そのキーの中にこの値が含まれている**必要があります**。

-   この値**は、この値が属するコントラクトインスタンスを参照してはいけません**。

依存関係ツリーの何らかの場所にあるコントラクトインスタンスを参照するには、以下のように値を構築する必要があります。

-   `[p1, p2, .. pn]`が依存関係ツリーへの経路を定義するとします。

-   `p1, p2, pn`**はすべて有効なパッケージ名でなければなりません**。

-   `p1`**は現在のパッケージの`buildDependencies`のキーに存在する必要があります**。

-   `n > 1`の`pn`の場合、`pn`**は`pn-1`のパッケージの`buildDependencies`のキーに存在する必要があります**。

-   値は`<p1>:<p2>:<...>:<pn>:<contract-instance>`という文字列で表されます。ここで、`<p1>、<p2>、<pn>`はすべて有効なパッケージ名で、`<contract-instance>`は有効な[コントラクト名](#contract-name)です。

-   `<contract-instance>`値**は有効な[コントラクトインスタンス名](#contract-instance-name)でなければなりません**。

-   `<pn>`で定義された依存関係のパッケージ内で、以下のすべてが満たされる必要があります:

    -   この値がネストされているチェーン定義の下に**厳密に1つ**のチェーンが定義されている**必要があります**。

    -   `<contract-instance>`値**は、一致するチェーンのキーに存在する必要があります**。
  
### *バイトコード*オブジェクト

バイトコードオブジェクトには以下のキー/値ペアがあります。

#### バイトコード: `bytecode`

`bytecode`フィールドは、バイトコードの`0x`プレフィックス付き16進数表現を含む文字列です。

* **必須**: はい
* **型**:  文字列
* **フォーマット**: `0x`プレフィックス付き16進数。

#### リンク参照: `linkReferences`

`linkReferences`フィールドは、対応するバイトコード内の[リンク](#linking)を必要とする場所を定義します。

* **必須**: いいえ
* **型**:  配列
* **フォーマット**: すべての値**は有効な[リンク参照オブジェクト](#the-link-reference-object)でなければなりません**。以下も参照してください。

フォーマット

対応する`bytecode`フィールドに適用された場合に*いずれか*の[リンク参照](#link-reference)が無効になるか、リンク参照が重複する場合、このフィールドは無効と見なされます。

重複は、2つのリンク参照が重なることと定義されます。

#### リンク依存関係: `linkDependencies`

`linkDependencies`は、対応するバイトコードをリンクするために使用された[リンク値](#link-value)を定義します。

* **必須**: いいえ
* **型**:  配列
* **フォーマット**: すべての値**は有効な[リンク値オブジェクト](#the-link-value-object)でなければなりません**。以下も参照してください。

フォーマット

このフィールドの検証には以下が含まれます:

-   2つのリンク値オブジェクトは、`offsets`の値が重複**してはいけません**。

-   各[リンク値オブジェクト](#the-link-value-object)には、`linkReferences`フィールドに対応する[リンク参照オブジェクト](#the-link-reference-object)が**必ず**存在する必要があります。

-   解決された`value`の長さ**は、対応する[リンク参照](#link-reference)の`length`と等しい必要があります**。


### *パッケージメタ*オブジェクト

*パッケージメタ*オブジェクトは、以下のキー/値ペアで定義されます。

#### 作者

`authors`フィールドは、このパッケージの作者の人間可読の名前のリストを定義します。パッケージ**に含めることができます**。

* **必須**: いいえ
* **キー**: `authors`
* **型**:  配列(文字列)

#### ライセンス

`license`フィールドは、このパッケージに関連付けられたライセンスを宣言します。この値**は[SPDX](https://spdx.org/licenses/)フォーマットに準拠**する必要があります。パッケージ**にこのフィールドを含める必要があります**。[ソースオブジェクト](#the-source-object)のファイルがそれ自体のライセンスを定義している場合、そのライセンスがこのパッケージスコープの`meta`ライセンスよりも優先されます。

* **必須**: いいえ
* **キー**: `license`
* **型**:  文字列

#### 説明

`description`フィールドは、パッケージに関連する追加の詳細を提供します。パッケージ**に含めることができます**。

* **必須**: いいえ
* **キー**: `description`
* **型**:  文字列

#### キーワード

`keywords`フィールドは、このパッケージに関連する関連キーワードを提供します。

* **必須**: いいえ
* **キー**: `keywords`
* **型**:  配列(文字列)

#### リンク

`links`フィールドは、このパッケージに関連付けられた関連リソースのURIを提供します。可能な場合、作者**は以下の一般的なリソースに対して以下のキーを使用する必要があります**。

-   `website`: パッケージのプライマリウェブサイト。

-   `documentation`: パッケージのドキュメンテーション

-   `repository`: プロジェクトのソースコードの場所。

* **必須**: いいえ
* **キー**: `links`
* **型**:  オブジェクト (文字列: 文字列)

### *ソース*オブジェクト

*ソース*オブジェクトは、以下のフィールドで定義されます。

* **キー**: ソースファイルの一意の識別子。 (文字列)
* **値**: [ソースオブジェクト](#the-source-object)

### *ソース*オブジェクト

#### チェックサム: `checksum`

ソースファイルのハッシュ。

* **必須**: `content`フィールドが欠落しており、提供されたURLにコンテンツハッシュが含まれていない場合**のみ**。
* **キー**: `checksum`
* **値**: [チェックサムオブジェクト](#the-checksum-object)

#### URL: `urls`

同じソースファイルを解決するURLの配列。  
-   URLは**コンテンツアドレス可能なファイルシステムに保存する必要があります**。それ以外の場合は、`content`または`checksum`**を含める必要があります**。

-   URLは**スキームで始まる必要があります**。

-   結果のドキュメントがディレクトリである場合、キーは**ディレクトリパスとして解釈される必要があります**。

-   結果のドキュメントがファイルである場合、キーは**ファイルパスとして解釈される必要があります**。

* **必須**: `content`が含まれていない場合。
* **キー**: `urls`
* **値**: 配列(文字列)

#### コンテンツ: `content`

インラインのコントラクトソース。`urls`と`content`の両方が提供される場合、`content`の値**は`urls`で識別されるファイルのコンテンツと一致する必要があります**。

* **必須**: `urls`が含まれていない場合。
* **キー**: `content`
* **値**: 文字列

#### インストールパス: `installPath`

ソースファイルのファイルシステムパス。  
-   **`./`で始まる相対ファイルシステムパスでなければなりません**。

-   **現在の仮想作業ディレクトリ内にあるパスでなければなりません**。

-   **一意でなければなりません**。

-   **不適切な実装を避けるため、`../`を含んでいてはいけません**。

* **必須**: このフィールド **ディスクにパッケージを書き込めるようにするために含める必要があります**。
* **キー**: `installPath`
* **値**: 文字列

#### タイプ: `type`

`type`フィールドは、ソースファイルのタイプを宣言します。このフィールドは**以下の値のいずれかでなければなりません**: `solidity`, `vyper`, `abi-json`, `solidity-ast-json`.

* **必須**: いいえ
* **キー**:
`type`
* **値**: 文字列

#### ライセンス: `license`

`license`フィールドは、このソースファイルに関連付けられたライセンスのタイプを宣言します。定義された場合、このライセンスはパッケージスコープの[メタライセンス](#license)を上書きします。

* **必須**: いいえ
* **キー**: `license`
* **値**: 文字列

### *チェックサム*オブジェクト

*チェックサム*オブジェクトは、以下のキー/値ペアで定義されます。

#### アルゴリズム: `algorithm`

対応するハッシュを生成するために使用された`algorithm`。`sha3`、`sha256`、`md5`、`keccak256`などのアルゴリズムが含まれますが、これらに限定されません。

* **必須**: はい
* **型**:  文字列

#### ハッシュ: `hash`

対応するアルゴリズムで生成されたソースファイルのコンテンツのハッシュ。

* **必須**: はい
* **型**:  文字列

### *コントラクトタイプ*オブジェクト

*コントラクトタイプ*オブジェクトは、以下のキー/値ペアで定義されます。

#### コントラクト名: `contractName`

`contractName`フィールドは、この[コントラクトタイプ](#contract-type)の[コントラクト名](#contract-name)を定義します。

* **必須**: [コントラクト名](#contract-name)と[コントラクトエイリアス](#contract-alias)が同じでない場合。
* **型**:  文字列
* **フォーマット**: **有効な[コントラクト名](#contract-name)でなければなりません**

#### ソースID: `sourceId`

このコントラクトタイプが生成されたソースファイルの一意のグローバル識別子。

* **必須**: いいえ
* **型**:  文字列
* **フォーマット**: **このパッケージの[ソースオブジェクト](#the-sources-object)に含まれる一意のソースIDと一致する必要があります**。

#### デプロイメントバイトコード: `deploymentBytecode`

`deploymentBytecode`フィールドは、この[コントラクトタイプ](#contract-type)のバイトコードを定義します。

* **必須**: いいえ
* **型**:  オブジェクト
* **フォーマット**: **[バイトコードオブジェクト](#the-bytecode-object)フォーマットに準拠する必要があります**。

#### ランタイムバイトコード: `runtimeBytecode`

`runtimeBytecode`フィールドは、この[コントラクトタイプ](#contract-type)の`0x`プレフィックス付きのランタイム部分の[バイトコード](#bytecode)を定義します。

* **必須**: いいえ
* **型**:  オブジェクト
* **フォーマット**: **[バイトコードオブジェクト](#the-bytecode-object)フォーマットに準拠する必要があります**。

#### ABI: `abi`

* **必須**: いいえ
* **型**:  配列
* **フォーマット**: **[Ethereum Contract ABI JSON](https://github.com/ethereum/wiki/wiki/Ethereum-Contract-ABI#json)フォーマットに準拠する必要があります**。

#### ユーザードキュメント: `userdoc`

* **必須**: いいえ
* **型**:  オブジェクト
* **フォーマット**: **[ユーザードキュメント](https://github.com/ethereum/wiki/wiki/Ethereum-Natural-Specification-Format#user-documentation)フォーマットに準拠する必要があります**。

#### 開発者ドキュメント: `devdoc`

* **必須**: いいえ
* **型**:  オブジェクト
* **フォーマット**: **[開発者ドキュメント](https://github.com/ethereum/wiki/wiki/Ethereum-Natural-Specification-Format#developer-documentation)フォーマットに準拠する必要があります**。

### *コントラクトインスタンス*オブジェクト

**コントラクトインスタンスオブジェクト**は、単一の展開された[コントラクトインスタンス](#contract-instance)を表し、以下のキー/値ペアで定義されます。

#### コントラクトタイプ: `contractType`

`contractType`フィールドは、この[コントラクトインスタンス](#contract-instance)の[コントラクトタイプ](#contract-type)を定義します。これは、このパッケージに含まれるコントラクトタイプのいずれかを参照したり、`buildDependencies`セクションのパッケージ依存関係から見つかったコントラクトタイプを参照したりできます。

* **必須**: はい
* **型**:  文字列
* **フォーマット**: 以下の2つのフォーマットのいずれかに準拠する必要があります。

このパッケージからコントラクトタイプを参照するには、`<contract-alias>`形式を使用します。

-   `<contract-alias>`値**は有効な[コントラクトエイリアス](#contract-alias)でなければなりません**。

-   この値**は、このパッケージの`contractTypes`セクションのキーに存在する必要があります**。

依存関係からコントラクトタイプを参照するには、`<package-name>:<contract-alias>`形式を使用します。

-   `<package-name>`値**は、このパッケージの`buildDependencies`のキーに存在する必要があります**。

-   `<contract-alias>`値**は有効な[コントラクトエイリアス](#contract-alias)でなければなりません**。

-   `<package-name>`の解決されたパッケージには、`<contract-alias>`値が`contractTypes`セクションのキーに存在する必要があります。

#### アドレス: `address`

`address`フィールドは、[コントラクトインスタンス](#contract-instance)の[アドレス](#address)を定義します。

* **必須**: はい
* **型**:  文字列
* **フォーマット**: `^0x[0-9a-fA-F]{40}You are tasked with translating a technical Markdown document from English to a specified target language. Your goal is to produce an accurate and natural-sounding translation while preserving the original Markdown formatting and technical terminology.

Here is the Markdown document to be translated:

<markdown_document>
`に一致する0x接頭辞付き16進数Ethereumアドレス。

#### トランザクション: `transaction`

`transaction`フィールドは、このコントラクトインスタンスが作成されたトランザクションハッシュを定義します。

* **必須**: いいえ
* **型**:  文字列
* **フォーマット**: `0x`プレフィックス付き16進数トランザクションハッシュ。

#### ブロック: `block`

`block`フィールドは、このコントラクトインスタンスを作成したトランザクションがマイニングされたブロックハッシュを定義します。

* **必須**: いいえ
* **型**:  文字列
* **フォーマット**: `0x`プレフィックス付き16進数ブロックハッシュ。

#### ランタイムバイトコード: `runtimeBytecode`

`runtimeBytecode`フィールドは、この[コントラクトインスタンス](#contract-instance)のランタイム部分のバイトコードを定義します。存在する場合、このフィールドの値は、[コントラクトタイプ](#contract-type)のこのコントラクトインスタンスのランタイムバイトコードを上書きします。

* **必須**: いいえ
* **型**:  オブジェクト
* **フォーマット**: **[バイトコードオブジェクト](#the-bytecode-object)フォーマットに準拠する必要があります**。

このバイトコードの`linkReferences`のエントリーはすべて、`linkDependencies`セクションに対応するエントリーを持つ**必要があります**。

### *コンパイラ情報*オブジェクト

`compilers`フィールドは、このパッケージに含まれる任意の[コントラクトタイプ](#contract-type)または[コントラクトインスタンス](#contract-instance)のコンパイル時に使用された様々なコンパイラとその設定を定義します。

*コンパイラ情報*オブジェクトは、以下のキー/値ペアで定義されます。

#### 名前: `name`

`name`フィールドは、コンパイルに使用されたコンパイラを定義します。

* **必須**: はい
* **キー**: `name`
* **型**:  文字列

#### バージョン: `version`

`version`フィールドは、コンパイラのバージョンを定義します。このフィールドは**OSに依存しない(OSが文字列に含まれない)形式の[semver](http://semver.org/)形式の安定バージョンか、ナイトリービルドの場合は`<semver>-<commit-hash>`の形式(例: `0.4.8-commit.60cc1668`)でなければなりません**。

* **必須**: はい
* **キー**: `version`
* **型**:  文字列

#### 設定: `settings`

`settings`フィールドは、コンパイル時に使用された設定や構成を定義します。`"solc"`コンパイラの場合、これは**[コンパイラ入力と出力の説明](http://solidity.readthedocs.io/en/latest/using-the-compiler.html#compiler-input-and-output-json-description)に準拠**する必要があります。

* **必須**: いいえ
* **キー**: `settings`
* **型**:  オブジェクト

#### コントラクトタイプ: `contractTypes`

このパッケージ内の[コントラクトエイリアス](#contract-alias)または[コントラクトタイプ](#contract-type)のリスト。これらはこのコンパイラを使用して出力を生成しました。

-   ローカルに`runtimeBytecode`を宣言する`contractTypes`**は、コンパイラオブジェクトに属する必要があります**。

-   単一の`contractTypes`**は、複数のコンパイラに属してはいけません**。

* **必須**: いいえ
* **キー**: `contractTypes`
* **型**:  配列([コントラクトエイリアス](#contract-alias))


### BIP122 URI

BIP122 URIは、[BIP-122](https://github.com/bitcoin/bips/blob/master/bip-0122.mediawiki)仕様のサブセットを使用してブロックチェーンを定義するために使用されます。

    blockchain://<genesis_hash>/block/<latest confirmed block hash>

`<genesis hash>`は最初のブロックのブロックハッシュを表し、`<latest confirmed block hash>`は最新の信頼できるブロックのハッシュを表します(パッケージマネージャーは希望する確認レベルを自由に選択できます)。

### 用語集

このグロッサリーの用語は、V3での変更を反映して更新されています。

#### ABI  
アプリケーションバイナリインターフェースのJSON表現。詳細は公式の[仕様](https://solidity.readthedocs.io/en/develop/abi-spec.html)を参照してください。

#### アドレス  
特定のチェーン上のアカウントの公開識別子

#### バイトコード  
コンパイラによって生成されたEVMの命令セット。特に指定がない限り、16進数でエンコードされ、バイト単位で表され、`0x`[プレフィックス](#prefixed)が付いていると想定されます。

バイトコードはリンク付きまたはリンク解除された状態になることができます。(「[リンク](#linking)」を参照)

* **リンク解除バイトコード**: コントラクトのEVM命令の16進数表現で、[リンク](#linking)が必要な部分がゼロバイトで埋められています。<br>**例**: `0x606060405260e06000730000000000000000000000000000000000000000634d536f`
* **リンクバイトコード**: コントラクトのEVM命令の16進数表現で、すべての[リンク参照](#link-reference)が目的の[リンク値](#link-value)に置き換えられています。**例**: `0x606060405260e06000736fe36000604051602001526040518160e060020a634d536f`

#### チェーン定義  
この定義は[BIP122 URI](https://github.com/bitcoin/bips/blob/master/bip-0122.mediawiki)に由来します。

`blockchain://<chain_id>/block/<block_hash>`形式のURI

-   `chain_id`は、チェーンのジェネシスハッシュの[プレフィックスなし](#unprefixed)16進数表現です。

-   `block_hash`は、チェーン上のブロックのハッシュの[プレフィックスなし](#unprefixed)16進数表現です。

チェーンは、ジェネシスブロックハッシュが`chain_id`と一致し、`block_hash`で定義されたブロックがそのチェーン上に見つかる場合、その定義に一致するとみなされます。単一のURIに複数のチェーンが一致する可能性があり、その場合はすべてのチェーンが有効な一致とみなされます。

#### コンテンツアドレス可能なURI  
コンテンツの整合性を検証するための暗号化ハッシュを含むURI。

URIフ
ォーマットはRFC3986で定義されています。

IPFS およびSwarmをサポートすることが**推奨**されます。

#### コントラクトエイリアス  
特定の[コントラクトタイプ](#contract-type)を参照するために使用される名前。コントラクトエイリアスは**単一の[パッケージ](#package)内で一意でなければなりません**。

コントラクトエイリアスは**以下の命名スキームの*いずれか*に従う必要があります**:

-   `<contract-name>`

-   `<contract-name><identifier>`

`<contract-name>`部分**は、このコントラクトタイプの[コントラクト名](#contract-name)と同じでなければなりません**。

`<identifier>`部分**は正規表現`^[-a-zA-Z0-9]{1,256}You are tasked with translating a technical Markdown document from English to a specified target language. Your goal is to produce an accurate and natural-sounding translation while preserving the original Markdown formatting and technical terminology.

Here is the Markdown document to be translated:

<markdown_document>
`に一致する必要があります**。

#### コントラクトインスタンス  
コントラクトインスタンスは、[コントラクトタイプ](#contract-type)の特定のデプロイバージョンです。

すべてのコントラクトインスタンスには、特定のチェーン上の[アドレス](#address)があります。

#### コントラクトインスタンス名  
単一の[パッケージ](#package)のデプロイメントから特定の[コントラクトインスタンス](#contract-instance)を参照する名前。この名前**は、同じチェーン上の他のすべてのコントラクトインスタンスに対して一意でなければなりません**。この名前は正規表現`^[a-zA-Z_$][a-zA-Z0-9_$]{0,255}You are tasked with translating a technical Markdown document from English to a specified target language. Your goal is to produce an accurate and natural-sounding translation while preserving the original Markdown formatting and technical terminology.

Here is the Markdown document to be translated:

<markdown_document>
`に準拠する必要があります。

単一の[コントラクトタイプ](#contract-type)の展開インスタンスしかない場合、パッケージマネージャー**はそのコントラクトタイプのコントラクトエイリアスをこの名前に使用する必要があります**。

複数の展開インスタンスがある場合、パッケージマネージャー**は、2つの展開インスタンスを意味的に区別するのに役立つ追加の意味情報を提供する名前を使用する必要があります**。

#### コントラクト名  
ソースコード内で特定の[コントラクトタイプ](#contract-type)を定義する名前。これらの名前**は正規表現`^[a-zA-Z_$][a-zA-Z0-9_$]{0,255}You are tasked with translating a technical Markdown document from English to a specified target language. Your goal is to produce an accurate and natural-sounding translation while preserving the original Markdown formatting and technical terminology.

Here is the Markdown document to be translated:

<markdown_document>
`に準拠する必要があります**。

プロジェクトのソースファイル内に同じコントラクト名を持つ複数のコントラクトが存在する可能性があります。

#### コントラクトタイプ  
パッケージソースの特定のコントラクトを指します。この用語は、抽象コントラクト、通常のコントラクト、ライブラリを指すために使用できます。2つのコントラクトが同じバイトコードを持つ場合、それらは同じコントラクトタイプです。

例:

    contract Wallet {
        ...
    }

`Wallet`コントラクトの展開インスタンスは、`Wallet`タイプのコントラクトになります。

#### 識別子  
[パッケージ](#package)内の名前付きエンティティを一般的に指します。

正規表現`^[a-zA-Z][-_a-zA-Z0-9]{0,255}You are tasked with translating a technical Markdown document from English to a specified target language. Your goal is to produce an accurate and natural-sounding translation while preserving the original Markdown formatting and technical terminology.

Here is the Markdown document to be translated:

<markdown_document>
`に一致する文字列。


#### リンク参照  
バイトコード内でリンクが必要な場所。リンク参照には以下のプロパティがあります。

* **`offset`**: リンク参照が始まるバイトコード内の位置を定義します。
* **`length`**: 参照の長さを定義します。
* **`name`**: (オプション) 参照を識別する文字列。

#### リンク値  
[リンク参照](#link-reference)に挿入できる値。

#### リンク  
[リンク参照](#link-reference)を[リンク値](#link-value)で置き換える行為。

#### パッケージ  
アプリケーションのソースまたはコンパイルされたバイトコードとともに、著作権、ライセンス、バージョン管理などのメタデータを配布すること。

簡潔のため、**パッケージ**という用語は、しばしば[パッケージマニフェスト](#package-manifest)を意味するために用いられます。

#### パッケージマニフェスト  
パッケージの機械可読な説明。

#### プレフィックス付き  
先頭に`0x`がある[バイトコード](#bytecode)文字列。

* **例**: `0xdeadbeef`

#### プレフィックスなし  
[プレフィックス付き](#prefixed)ではない。

* **例**: `deadbeef`

## 根拠

### 最小化

EthPMパッケージは、一貫性を確保するために、アルファベット順に並べられた最小化されたJSONとして配布されます。
パッケージはコンテンツアドレス可能なファイルシステム(IPFS など)で公開されるため、この制限により、任意の一連のコントラクトアセットが常に同じコンテンツアドレス可能なURIに解決されることが保証されます。

### パッケージ名

パッケージ名は、小文字の文字、数字、およびダッシュ`-`に制限されています。これにより、パッケージ名の可読性が向上し、信頼できるパッケージと似た文字で偽装された悪意のあるパッケージを正確に識別できるセキュリティ特性が向上します(例: `O`と`0`の区別)。

### BIP122

BIP-122標準は、EthPM v1以来使用されており、ブロックチェーンを識別し、フォークを区別するための業界標準URIスキームです。

### コンパイラ

コンパイラは現在トップレベルの配列で定義されているため、ツールがコントラクトアセットを処理または検証するために必要なコンパイラタイプを特定するタスクが簡素化されます。これにより、複数の`contractTypes`が同じコンパイラタイプを共有する場合の不要な重複情報も削除されます。

## 下位互換性

EthPMの仕様の理解と可読性を向上させるために、`manifest_version`フィールドはv3で`manifest`に更新されました。下位互換性を確保するために、v3パッケージは**必ず**トップレベルの`"manifest"`に`"ethpm/3"`の値を定義する必要があります。さらに、`"manifest_version"`はv3パッケージでは禁止されているトップレベルのキーです。


## セキュリティ上の考慮事項

EthPMパッケージを使用するには、他者が書いたコードをインポートおよび/または実行する必要があります。EthPMの仕様は、適切に構築およびリリースされたEthPMパッケージを使用する場合、ユーザーがパッケージ作成者が含めたのと同じコードを確実に持つことを保証します。ただし、このコードが安全に対話できることを保証することは不可能です。したがって、ユーザーは信頼できる個人または組織が悪意のないコードを含むと判断したEthPMパッケージのみと対話する必要があります。


## 著作権

著作権およびその関連権利は[CC0](../LICENSE.md)で放棄されています。