---
original: 2f735b1c9df75a3c0babf808f7a18d5924c8cd7ba1ec3e68118b913618f1ff30
---

---
eip: 5219
title: コントラクトリソースリクエスト
description: コントラクトからリソースをリクエストできるようにする
author: Gavin John (@Pandapip1)
discussions-to: https://ethereum-magicians.org/t/pr-5219-discussion-contract-rest/9907
status: 最終
type: 標準トラック
category: ERC
created: 2022-07-10
---

## 概要

このEIPは、スマートコントラクトにリソースリクエストを行い、HTTP形式の応答を受け取るためのインターフェースを標準化します。

## 動機

Ethereumは分散型アプリケーション(「DApp」と呼ばれる)を構築するための最も確立されたブロックチェーンです。そのため、Ethereumのdappエコシステムは非常に多様です。しかし、DAppの問題点の1つは、完全に分散化されていないことです。具体的には、「分散型」アプリケーションを利用するには、まず最初にDAppのフロントエンドコードを含む*中央集権的*なウェブサイトにアクセスする必要があり、いくつかの問題が生じます。中央集権的なウェブサイトを介して分散型アプリケーションにアクセスする際の以下のようなリスクがあります:

- 信頼最小化: 不必要に多くのエンティティを信頼する必要がある
- 検閲: 中央集権的なウェブサイトは検閲に対して耐性がない
- 永続性: インターフェースを永続的に保存するメカニズムがない可能性がある
- 相互運用性: スマートコントラクトはDAppインターフェースと直接やり取りできない

## 仕様

この文書の中の「MUST」、「MUST NOT」、「REQUIRED」、「SHALL」、「SHALL NOT」、「SHOULD」、「SHOULD NOT」、「RECOMMENDED」、「MAY」、「OPTIONAL」というキーワードは、RFC 2119に記載されているように解釈されるものとします。

### 名前解決

名前解決メカニズムを提案するEIPは、このEIPを参照し、クライアントがそのメカニズムをサポートすることを推奨してもよいです。クライアントは、RFC 1034およびRFC 1035で定義されている通常のDNSもサポートしてもよいです。

### 関心事の分離

アプリケーションロジックとフロントエンドロジック(「[コントラクトインターフェース](#contract-interface)」で定義されているインターフェースを実装するコントラクト)を分離することが推奨されます。

### コントラクトインターフェース

DAppコントラクトは、以下のファイルで定義されているインターフェースを実装しなければなりません: [コントラクトインターフェース](../assets/eip-5219/IDecentralizedApp.sol)。

### 実装者への注意

ガスコストを節約するために、`message/external-body` MIME-typeを使用することをお勧めします。これにより、スマートコントラクトがアクセスできないデータを指定できます。例えば、次の応答は、クライアントにIPFSからデータをフェッチするよう指示します:

```yaml
statusCode: 200
body: これは本当のボディではありません!
headers:
  - key: Content-type
    value: message/external-body; access-type=URL; URL="ipfs://11148a173fd3e32c0fa78b90fe42d305f202244e2739"
```

## 根拠

`request`メソッドは読み取り専用に選択されました。これは、すべてのデータがパースされたDAppから送信されるべきであるためです。その理由は以下の通りです:

- トランザクションを送信してリクエストを送信すると、コストがかかり、トランザクションがマイニングされるまで待つ必要があり、ユーザーエクスペリエンスが悪化します。
- 複雑なフロントエンドロジックをスマートコントラクトに保存するのは、デプロイコストがかかり、エンドユーザーのマシンで実行するのが適切です。
- 関心事の分離: フロントエンドコントラクトは、バックエンドのスマートコントラクトとやり取りする必要がありません。
- 他のEIPを使用して、`307 Temporary Redirect`ステータスコードと組み合わせて、状態変更操作をリクエストできます。

完全なHTTPリクエストをミミックするのではなく、非常にスリムなバージョンを選択した理由は以下の通りです:

- 特に関連性のあるHTTPメソッドは`GET`のみです。
- クエリパラメーターはリソースにエンコードできます。
- リクエストヘッダーは、ほとんどの場合、`GET`リクエストには不要です。

## 下位互換性

このEIPは、[名前解決](#name-resolution)セクションに記載されているすべての標準と下位互換性があります。

## セキュリティ上の考慮事項

通常のURLにアクセスする際のセキュリティ上の考慮事項、例えば`3XX`リダイレクトに従うことによるプライバシーの漏洩などが適用されます。

## 著作権

著作権およびそれに関連する権利は[CC0](../LICENSE.md)により放棄されています。