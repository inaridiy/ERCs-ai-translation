---
original: 6409c111ba0da71a14d9581737ec06805a6d30e273c745cf91bda30becb0adfb
---

---
eip: 4974
title: 評価
description: 数値評価の割り当てと管理のためのインターフェース
author: Daniel Tedesco (@dtedesco1)
discussions-to: https://ethereum-magicians.org/t/8805
status: 停滞
type: Standards Track
category: ERC
created: 2022-04-02
requires: 165
---

## 概要

この規格は、Ethereumブロックチェーン上で数値評価を割り当てて管理するための標準化されたインターフェースを定義しています。これにより、評価をスマートコントラクト内で明確化し、他のアプリケーションで認識できるようになり、トークンの新しい使用事例が広がります。

## 動機

従来、ブロックチェーンアプリケーションはデジタルアセットの売買に焦点を当ててきました。しかし、アセットを中心としたモデルは、多くのEVM(Ethereum Virtual Machine)ベースのゲームやDAOにおいて、「支払いをしないと参加できない」という動きを生み出し、コミュニティベースのブロックチェーンプロジェクトにとって有害な影響を及ぼすことがありました。

この提案は、このような問題に取り組むため、コントラクトやウォレットに評価を割り当てることができるようにします。これにより、ブロックチェーンアプリケーションの新しい合成プリミティブが提供されます。これによって、以下のような多様な新しい使用事例が可能になります:

- DAOの投票権重み付け: この規格を使って割り当てられた評価を、分散型自治組織(DAO)のメンバーの投票権重み付けに使うことができます。例えば、DAOは、コミュニティに強い実績を持つメンバーにより高い評価を割り当て、これらの評価に基づいて各メンバーの意思決定プロセスにおける相対的な影響力を決めることができます。

- 分散型ゲームエコシステムでのEXPポイント: 評価を使って、分散型ゲームエコシステムでのプレイヤーの進捗を追跡し、特定のマイルストーンや目標を達成したプレイヤーを報酬することができます。例えば、ゲームは評価を使ってプレイヤーにEXPポイントを割り当て、これを使ってゲーム内の新しいコンテンツやアビリティをロック解除することができます。

- 企業の顧客ロイヤルティポイント: 評価を使って、顧客の企業やサービスに対するロイヤルティを追跡し、その継続的な支援に対して報酬を与えることができます。例えば、企業は評価を使って顧客にロイヤルティポイントを割り当て、これらを特別オファーやディスカウントと交換できるようにすることができます。

- 分散型保険会社のアセット評価: 評価を使って、分散型保険会社におけるアセットのリスクプロファイルを評価し、加入者に提供する保険料と保険カバレッジを決定することができます。例えば、分散型保険会社は評価を使って様々なタイプのアセットのリスクを評価し、リスクの低いアセットに対してより低い保険料と高い保険カバレッジを提供することができます。

この規格は、[EIP-20](./eip-20.md)および[EIP-721](./eip-721.md)トークン規格の影響を受けており、その構造、スタイル、セマンティクスを参考にしています。

## 仕様

この文書におけるキーワード「MUST」、「MUST NOT」、「REQUIRED」、「SHALL」、「SHALL NOT」、「SHOULD」、「SHOULD NOT」、「RECOMMENDED」、「MAY」、「OPTIONAL」は、RFC 2119に記載されているように解釈されるものとします。

準拠するすべてのコントラクトは、以下のインターフェースを実装しなければなりません:

```
// SPDX-License-Identifier: CC0

pragma solidity ^0.8.0;

/// @title EIP-4974 評価
/// @dev https://eips.ethereum.org/EIPS/EIP-4974を参照してください
///  注: このインターフェースのEIP-165識別子は#######です。
///  `operator`アドレスが`address(0)`ではない状態で初期化する必要があります。
interface IERC4974 /* is ERC165 */ {

    /// @dev `operator`が変更されたときに発行されます。
    ///  `operator`が任意のメカニズムで変更されたときに必ず発行されます。
    ///  `setOperator`によってのみ発行されます。
    event NewOperator(address indexed _operator);

    /// @dev オペレーターが評価を発行したときに発行されます。 
    ///  評価が任意のメカニズムで割り当てられたときに必ず発行されます。
    ///  `rate`によってのみ発行されます。
    event Rating(address _rated, int8 _rating);

    /// @dev オペレーターが評価を削除したときに発行されます。 
    ///  評価が任意のメカニズムで削除されたときに必ず発行されます。
    ///  `remove`によってのみ発行されます。
    event Removal(address _removed);

    /// @notice オペレーター権限を任命する。
    /// @dev `msg.sender`が`operator`でない場合は例外を投げる必要があります。
    ///  現在の`operator`または0アドレスである場合は例外を投げる必要があります。
    ///  `Appointment`イベントを発行する必要があります。
    /// @param _operator スマートコントラクトの新しいオペレーター。
    function setOperator(address _operator) external;

    /// @notice アドレスに評価を付ける。
    ///  成功するたびに`Rating`イベントを発行する必要があります。
    /// @param _rated 評価対象のアドレス。
    /// @param _rating 割り当てる評価値。
    function rate(address _rated, int8 _rating) external;

    /// @notice アドレスからの評価を削除する。
    ///  成功するたびに`Remove`イベントを発行する必要があります。
    /// @param _removed 評価を削除するアドレス。
    function removeRating(address _removed) external;

    /// @notice 評価されたアドレスの評価を返す。
    /// @dev `Rating`が発行されるたびに登録する必要があります。
    ///  0アドレスについて問い合わせる場合は例外を投げるべきです。
    /// @param _rated 評価を問い合わせるアドレス。
    /// @return int8 割り当てられた評価値。
    function ratingOf(address _rated) external view returns (int8);
}

interface IERC165 {
    /// @notice コントラクトがインターフェースを実装しているかを問い合わせる。
    /// @dev インターフェース識別は EIP-165 で指定されています。この関数は
    ///  30,000 gas 未満を使用します。
    /// @param interfaceID EIP-165 で指定されたインターフェース識別子。
    /// @return bool `interfaceID` を実装している場合は `true`、そうでない場合は `false`。ただし、`interfaceID` が 0xffffffff の場合は常に `false` を返します。
    function supportsInterface(bytes4 interfaceID) external view returns (bool);
}
```

## 根拠

### 評価の割り当て

評価は、コントラクトのオペレーターの裁量によって行われるものとします。このパーティーは、スポーツチームのコーチやマルチシグDAOウォレットである可能性があります。ガバナンスの方法を具体的に定めるのではなく、ガバナンスが行われることを定めることにしました。これにより、特定の意思決定形態を最適化するよりも、より幅広い潜在的な使用事例に対応できるようになります。

この提案は、コミュニティの評判を割り当てるための統制メカニズムを標準化しますが、その認識の金融化を奨励するものではありません。公平性を保証するものではありませんが、その扉を開きます。

### int8の選択

符号付き: レビュアーは、相互作用するウォレットやコントラクトに対して中立的または否定的な評価を下すことができるようにする必要があります。これは、悪意のあるアクターの対象となる可能性のある分散型アプリケーションにとって特に重要です。

8ビット: ここでの目的は、評価を比較可能な範囲に保つことです。長期的には、これにより評価の簡単な集計が奨励される可能性があります。一方で、より大きな数値を使用すると、ユーザーが様々な尺度を使用する可能性があります。

### 評価の変更

コントラクトオペレーターが評価を更新できるようにすべきです。例えば、Bobがコミュニティに大きく貢献してきたが、その後Aliceから盗みを働いたことが発覚した場合、コミュニティはBobの立場と影響力を引き下げることを決めるかもしれません。ここでも、コミュニティ内の倫理的な基準を保証するものではありませんが、その扉を開きます。

関連して、評価者が自身の評価能力に自信を持てなくなった場合に、評価を取り消すことができるようにすべきです。

### インターフェースの検出

我々は、Standard Interface Detection ([EIP-165](./eip-165.md))を選択して、準拠するスマートコントラクトがサポートするインターフェースを公開しました。

### メタデータの選択

`name`と`description`関数をメタデータ拡張に必須としました。`name`は、ブロックチェーンベースのプリミティブの主要な規格に共通しています。`description`関数は、ゲームやその他のアプリケーションで複数の評価システムがある場合に役立つ可能性があります。

実装者に対して、`name`と`description`に空文字列を返すことも有効であることを伝えます。また、任意のスマートコントラクトが、あなたのコントラクトと同じ名称と説明を使用できることも伝えます。クライアントがどのように評価スマートコントラクトを著名(正規)と判断するかは、この規格の範囲外です。

### 欠点

この規格を使用する際の潜在的な欠点の1つは、評価が主観的であり、必ずしもコントラクトやウォレットの真の価値や品質を正確に反映するとは限らないことです。ただし、この規格には評価の更新と削除のメカニズムが用意されており、時間の経過とともに柔軟性と進化が可能になります。

動機で特定されたユーザーは、コントラクトやコミュニティがどのように他者を評価しているかを把握する強い需要を持っています。ある人々は自分の受け取った評価を誇りに思うかもしれませんが、他の人々は正当であるか否かにかかわらず、特定のコントラクトから否定的な評価を受けるかもしれません。否定的な評価は、いじめや差別などの悪意ある活動を可能にする可能性があります。この規格を使って評価システムを構築するすべての実装者に対し、彼らが創造する評価システムの結果に十分注意を払うよう求めます。

## 下位互換性

EIP-20およびEIP-721の仕様から`name`のセマンティクスを採用しました。

## 参考実装

この規格の参考実装は、アセットフォルダーにあります。
<!-- [../assets/EIP-4974/ERC4974.sol](../assets/EIP-4974/ERC4974.sol). -->

## セキュリティ上の考慮事項

この規格の潜在的なセキュリティ上の懸念の1つは、悪意のあるアクターがコントラクトやウォレットに虚偽または誤解を招く評価を割り当てるリスクです。これにより、DAOの投票権重み付けを操作したり、不正確な評価に基づいて利用者に悪い判断をさせたりする可能性があります。

この懸念に対処するため、この規格には評価の更新と削除のメカニズムが含まれており、虚偽または誤解を招く評価の修正が可能になります。さらに、評価の割り当てと更新を管理する単一のオペレーターアドレスを使うことで、評価の割り当てに関する規則と規制を施行することができます。

別の潜在的なセキュリティ上の懸念は、攻撃者がオペレーターアドレスの管理権を獲得し、自身の利益のために評価を操作するリスクです。このリスクを軽減するために、オペレーターアドレスの慎重な管理と保護、およびその管理と監視への複数の関係者の関与が推奨されます。

全体として、準拠するコントラクトのセキュリティは、オペレーターアドレスの慎重な管理と保護、ならびに評価の割り当てに関する明確な規則と規制の策
制に依存します。

## 著作権

著作権およびそれに関連する権利は[CC0](../LICENSE.md)により放棄されています。