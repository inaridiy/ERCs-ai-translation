---
original: 0e63ff47d8c301343eb79daca3e61b696b4c9165755efc7af8c6b8c3a51d4710
---

---
eip: 1948
title: éä»£æ›¿æ€§ãƒ‡ãƒ¼ã‚¿ãƒˆãƒ¼ã‚¯ãƒ³
author: Johann Barbie (@johannbarbie), Ben Bollen <ben@ost.com>, pinkiebell (@pinkiebell)
discussions-to: https://ethereum-magicians.org/t/erc-non-fungible-data-token/3139
status: åœæ»
type: Standards Track
category: ERC
created: 2019-04-18
requires: 721
---

## ç°¡å˜ãªè¦ç´„

ä¸€éƒ¨ã®NFTãƒ¦ãƒ¼ã‚¹ã‚±ãƒ¼ã‚¹ã§ã¯ã€éä»£æ›¿æ€§ãƒˆãƒ¼ã‚¯ãƒ³ã«é–¢é€£ä»˜ã‘ã‚‰ã‚ŒãŸå‹•çš„ãƒ‡ãƒ¼ã‚¿ã‚’æŒã¤å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚ã“ã‚Œã‚‰ã®å‹•çš„ãƒ‡ãƒ¼ã‚¿ã¯ã€ãƒˆãƒ¼ã‚¯ãƒ³ã®å¯¿å‘½ã®é–“ã«å¤‰æ›´ã§ãã¾ã™ã€‚å‹•çš„ãƒ‡ãƒ¼ã‚¿ã®ä¾‹:
- è‰²ãŒå¤‰åŒ–ã™ã‚‹Cryptokitties
- æ¨©åˆ©è€…ã‚’è¡¨ã™IPãƒˆãƒ¼ã‚¯ãƒ³
- ãƒã‚§ãƒ¼ãƒ³é–“ã§ãƒ‡ãƒ¼ã‚¿ã‚’è»¢é€ã™ã‚‹ãŸã‚ã®ãƒˆãƒ¼ã‚¯ãƒ³

æ—¢å­˜ã®ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿æ¨™æº–ã§ã¯ä¸ååˆ†ã§ã™ã€‚ãªãœãªã‚‰ã€ãƒ‡ãƒ¼ã‚¿ã¯é‹³é€ æ™‚ã«ã®ã¿è¨­å®šã§ãã€å¾Œã§å¤‰æ›´ã™ã‚‹ã“ã¨ã¯ã§ããªã„ã‹ã‚‰ã§ã™ã€‚

## æ¦‚è¦

éä»£æ›¿æ€§ãƒˆãƒ¼ã‚¯ãƒ³(NFT)ã«å‹•çš„ãƒ‡ãƒ¼ã‚¿ã‚’ä¿å­˜ã™ã‚‹æ©Ÿèƒ½ãŒè¿½åŠ ã•ã‚Œã¾ã™ã€‚32ãƒã‚¤ãƒˆã®ãƒ‡ãƒ¼ã‚¿ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ãŒè¿½åŠ ã•ã‚Œã€ã‚¢ã‚¯ã‚»ã‚¹ç”¨ã®èª­ã¿å–ã‚Šé–¢æ•°ãŒç”¨æ„ã•ã‚Œã¾ã™ã€‚æ›¸ãè¾¼ã¿é–¢æ•°ã§ã¯ã€ãƒˆãƒ¼ã‚¯ãƒ³ã®æ‰€æœ‰è€…ãŒãƒ‡ãƒ¼ã‚¿ã‚’æ›´æ–°ã§ãã¾ã™ã€‚ãƒ‡ãƒ¼ã‚¿ãŒæ›´æ–°ã•ã‚Œã‚‹ãŸã³ã«ã‚¤ãƒ™ãƒ³ãƒˆãŒç™ºè¡Œã•ã‚Œã€å‰ã®å€¤ã¨æ–°ã—ã„å€¤ãŒé€šçŸ¥ã•ã‚Œã¾ã™ã€‚

## å‹•æ©Ÿ

ã“ã®ãƒ—ãƒ­ãƒãƒ¼ã‚¶ãƒ«ã¯ã€å‹•çš„ãƒ‡ãƒ¼ã‚¿ã‚’æŒã¤ãƒˆãƒ¼ã‚¯ãƒ³ã®æ¨™æº–åŒ–ã‚’ç›®çš„ã¨ã—ã¦ã„ã¾ã™ã€‚xDAIã‚„Plasmaãƒã‚§ãƒ¼ãƒ³ãªã©ã®ã‚µã‚¤ãƒ‰ãƒã‚§ãƒ¼ãƒ³ã¨ã®ãƒ–ãƒªãƒƒã‚¸æ©Ÿèƒ½ã¯ã€ã“ã®ã‚ˆã†ãªãƒˆãƒ¼ã‚¯ãƒ³ã‚’ä½¿ã†ã“ã¨ã§æ©æµã‚’å—ã‘ã¾ã™ã€‚[åˆ†æ•£ãƒ–ãƒªãƒ¼ãƒ‡ã‚£ãƒ³ã‚°](https://ethresear.ch/t/a-distributed-breeding-function/5264)ã®ã‚ˆã†ãªãƒ‡ãƒ¼ã‚¿ãƒˆãƒ¼ã‚¯ãƒ³ãƒ™ãƒ¼ã‚¹ã®ãƒ—ãƒ­ãƒˆã‚³ãƒ«ãŒå¯èƒ½ã«ãªã‚Šã¾ã™ã€‚

## ä»•æ§˜

[ERC-721](./eip-721.md)ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹ã®æ‹¡å¼µã¨ã—ã¦ã€ä»¥ä¸‹ã®é–¢æ•°ã¨ã‚¤ãƒ™ãƒ³ãƒˆãŒææ¡ˆã•ã‚Œã¾ã™:

``` solidity
pragma solidity ^0.5.2;

/**
 * @dev ERC1948ã‚³ãƒ³ãƒˆãƒ©ã‚¯ãƒˆã®ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹ã€‚
 */
interface IERC1948 {

  /**
   * @dev `tokenId`ã®ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸å†…ã®`oldData`ãŒ`newData`ã«ç½®ãæ›ãˆã‚‰ã‚ŒãŸã¨ãã«ç™ºè¡Œã•ã‚Œã‚‹ã‚¤ãƒ™ãƒ³ãƒˆã€‚
   *
   * `oldData`ã¾ãŸã¯`newData`ãŒç©ºã®ãƒã‚¤ãƒˆåˆ—ã§ã‚ã‚‹å¯èƒ½æ€§ãŒã‚ã‚‹ã“ã¨ã«æ³¨æ„ã—ã¦ãã ã•ã„ã€‚
   */
  event DataUpdated(uint256 indexed tokenId, bytes32 oldData, bytes32 newData);

  /**
   * @dev æŒ‡å®šã—ãŸãƒˆãƒ¼ã‚¯ãƒ³ã®ãƒ‡ãƒ¼ã‚¿ã‚’èª­ã¿å–ã‚Šã¾ã™ã€‚`tokenId`ã®ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸å†…ã®ç¾åœ¨ã®ãƒ‡ãƒ¼ã‚¿ã‚’è¿”ã—ã¾ã™ã€‚
   *
   * @param tokenId ãƒ‡ãƒ¼ã‚¿ã‚’èª­ã¿å–ã‚‹ãƒˆãƒ¼ã‚¯ãƒ³ã€‚
   *
   * @return ãƒˆãƒ¼ã‚¯ãƒ³ã«ä¿å­˜ã•ã‚Œã¦ã„ã‚‹ç¾åœ¨ã®ãƒ‡ãƒ¼ã‚¿ã‚’è¡¨ã™ bytes32ã€‚
   */
  function readData(uint256 tokenId) external view returns (bytes32);

  /**
   * @dev æŒ‡å®šã—ãŸãƒˆãƒ¼ã‚¯ãƒ³ã®ãƒ‡ãƒ¼ã‚¿ã‚’æ›´æ–°ã—ã¾ã™ã€‚`tokenId`ã®ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ã«`newData`ã‚’æ›¸ãè¾¼ã¿ã¾ã™ã€‚
   *
   * @param tokenId ãƒ‡ãƒ¼ã‚¿ã‚’æ›¸ãè¾¼ã‚€ãƒˆãƒ¼ã‚¯ãƒ³ã€‚
   * @param newData ãƒˆãƒ¼ã‚¯ãƒ³ã«æ›¸ãè¾¼ã‚€ãƒ‡ãƒ¼ã‚¿ã€‚
   *
   * `DataUpdated`ã‚¤ãƒ™ãƒ³ãƒˆãŒç™ºè¡Œã•ã‚Œã¾ã™ã€‚
   */
  function writeData(uint256 tokenId, bytes32 newData) external;

}
```

## æ ¹æ‹ 

NFTã®ææ¡ˆã•ã‚ŒãŸãƒ‡ãƒ¼ã‚¿ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã¯ã€ã‚«ã‚¦ãƒ³ã‚¿ãƒ¼ã‚„ã‚¢ãƒ‰ãƒ¬ã‚¹ãªã©ã®ãƒ‡ãƒ¼ã‚¿ã‚’ç›´æ¥ä¿å­˜ã™ã‚‹ãŸã‚ã«ä½¿ç”¨ã•ã‚Œã¾ã™ã€‚ã‚ˆã‚Šå¤šãã®ãƒ‡ãƒ¼ã‚¿ãŒå¿…è¦ãªå ´åˆã¯ã€ãƒ¡ãƒ«ã‚¯ãƒ«ãƒ„ãƒªãƒ¼ã‚„ãƒ‘ãƒˆãƒªã‚·ã‚¢ãƒ„ãƒªãƒ¼ãªã©ã®èªè¨¼ãƒ‡ãƒ¼ã‚¿æ§‹é€ ã«å§”è­²ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚

ã“ã®ERCãƒ—ãƒ­ãƒãƒ¼ã‚¶ãƒ«ã¯ã€[åˆ†æ•£ãƒ–ãƒªãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ãƒ—ãƒ­ãƒãƒ¼ã‚¶ãƒ«](https://ethresear.ch/t/a-distributed-breeding-function/5264)ã‹ã‚‰æ´¾ç”Ÿã—ãŸã‚‚ã®ã§ã™ã€‚NFTã‚’ã‚µã‚¤ãƒ‰ãƒã‚§ãƒ¼ãƒ³é–“ã§ better çµ±åˆã§ãã‚‹ã‚ˆã†ã«ã™ã‚‹ãŸã‚ã§ã™ã€‚[ost.com](https://ost.com/)ã€[Skale](https://skalelabs.com/)ã€[POA](https://poa.network/)ã€[LeapDAO](https://leapdao.org/)ãŒã“ã®è­°è«–ã«å‚åŠ ã—ã¦ã„ã¾ã™ã€‚

## ä¸‹ä½äº’æ›æ€§

ğŸ¤·â€â™‚ï¸ è‘—è€…ã®çŸ¥ã‚‹é™ã‚Šã€é–¢é€£ã™ã‚‹ãƒ—ãƒ­ãƒãƒ¼ã‚¶ãƒ«ã¯ãªã„ãŸã‚ã€ä¸‹ä½äº’æ›æ€§ã¯è€ƒæ…®ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã›ã‚“ã€‚

## ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹

ã‚·ãƒ³ãƒ—ãƒ«ãªãƒãƒƒãƒ”ãƒ¼ã‚±ãƒ¼ã‚¹:

``` javascript
const ERC1948 = artifacts.require('./ERC1948.sol');

contract('ERC1948', (accounts) => {
  const firstTokenId = 100;
  const empty = '0x0000000000000000000000000000000000000000000000000000000000000000';
  const data = '0x0101010101010101010101010101010101010101010101010101010101010101';
  let dataToken;

  beforeEach(async () => {
    dataToken = await ERC1948.new();
    await dataToken.mint(accounts[0], firstTokenId);
  });

  it('should allow to write and read', async () => {
    let rsp = await dataToken.readData(firstTokenId);
    assert.equal(rsp, empty);
    await dataToken.writeData(firstTokenId, data);
    rsp = await dataToken.readData(firstTokenId);
    assert.equal(rsp, data);
  });

});
```


## å®Ÿè£…

ã‚½ãƒªãƒ‡ã‚£ãƒ†ã‚£ã§ã®ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹ã®å®Ÿè£…ä¾‹ã¯ä»¥ä¸‹ã®ã‚ˆã†ã«ãªã‚Šã¾ã™:

``` solidity
/**
 * @dev ERC721ãƒˆãƒ¼ã‚¯ãƒ³ã¨`IERC1948`ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹ã®å®Ÿè£…ã€‚
 *
 * ERC1948ã¯ã€å‹•çš„ãƒ‡ãƒ¼ã‚¿ã‚’ä¿å­˜ã§ãã‚‹éä»£æ›¿æ€§ãƒˆãƒ¼ã‚¯ãƒ³(NFT)ã§ã™ã€‚ãƒ‡ãƒ¼ã‚¿ã¯å„tokenIdã«å¯¾ã—ã¦ bytes32 ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã§ä¿å­˜ã•ã‚Œã¾ã™ã€‚32ãƒã‚¤ãƒˆã§ã¯ä¸ååˆ†ãªå ´åˆã¯ã€èªè¨¼ãƒ‡ãƒ¼ã‚¿æ§‹é€ (ãƒãƒƒã‚·ãƒ¥ã‚„ãƒ¡ãƒ«ã‚¯ãƒ«ãƒ„ãƒªãƒ¼)ã‚’ä½¿ç”¨ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚
 */
contract ERC1948 is IERC1948, ERC721 {

  mapping(uint256 => bytes32) data;

  /**
   * @dev `IERC1948.readData`ã‚’å‚ç…§ã—ã¦ãã ã•ã„ã€‚
   *
   * è¦ä»¶:
   *
   * - `tokenId`ãŒå­˜åœ¨ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚
   */
  function readData(uint256 tokenId) external view returns (bytes32) {
    require(_exists(tokenId));
    return data[tokenId];
  }

  /**
   * @dev `IERC1948.writeData`ã‚’å‚ç…§ã—ã¦ãã ã•ã„ã€‚
   *
   * è¦ä»¶:
   *
   * - `msg.sender`ãŒ`tokenId`ã®æ‰€æœ‰è€…ã§ã‚ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚
   */
  function writeData(uint256 tokenId, bytes32 newData) external {
    require(msg.sender == ownerOf(tokenId));
    emit DataUpdated(tokenId, data[tokenId], newData);
    data[tokenId] = newData;
  }

}
```

## è‘—ä½œæ¨©
è‘—ä½œæ¨©ãŠã‚ˆã³ãã®é–¢é€£æ¨©åˆ©ã¯[CC0](../LICENSE.md)ã«ã‚ˆã‚Šæ”¾æ£„ã•ã‚Œã¦ã„ã¾ã™ã€‚