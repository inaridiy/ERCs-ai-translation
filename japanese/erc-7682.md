---
original: 733cafbbb494f9c8552ea22938ab780fabc98a65a66e48029d92941af9775d51
---

---
eip: 7682
title: 補助的資金機能
description: ウォレットがアプリに追加の資金にアクセスできることを示す方法
author: Lukas Rosario (@lukasrosario), Wilson Cusack (@wilsoncusack)
discussions-to: https://ethereum-magicians.org/t/erc-7682-auxiliary-funds-capability/19599
status: Draft
type: Standards Track
category: ERC
created: 2024-04-09
requires: 5792
---

## 概要

[EIP-5792](./eip-5792.md)に準拠した機能で、ウォレットがユーザーのアドレスのオンチェーンの残高では説明できない追加の資金にアクセスできることをアプリに示すことができます。

## 動機

多くのアプリケーションは、ユーザーが何らかのアクションを完了する前に、ユーザーの残高を確認します。例えば、ユーザーがデックスでトークンを交換したい場合、デックスはユーザーのアドレスにその量のトークンがないことを確認すると、通常ユーザーがそれを行うことを阻止します。しかし、より高度なウォレットには、ユーザーが他の場所から資金にアクセスできるようにする機能があります。ウォレットは、これらのより高度なウォレットを使用するユーザーが残高チェックによってブロックされないように、アプリにそれらの追加の資金にアクセスできることを伝える方法が必要です。

## 仕様

1つの新しい[EIP-5792](./eip-5792.md)ウォレット機能が定義されています。

### ウォレットの実装

この仕様に準拠するには、補助的資金にアクセスできることを示したいウォレットは、`wallet_getCapabilities`呼び出しに対して、補助的資金にアクセスできる各チェーンについて`supported`フィールドが`true`に設定された`auxiliaryFunds`オブジェクトを返す必要があります。この仕様は、補助的資金の出所に関して何も制約を設けていません。

#### `wallet_getCapabilities`レスポンス仕様

```typescript
type AuxiliaryFundsCapability = {
  supported: boolean;
}
```

##### `wallet_getCapabilities`レスポンス例

```json
{
  "0x2105": {
    "auxiliaryFunds": {
      "supported": true
    },
  },
  "0x14A34": {
    "auxiliaryFunds": {
      "supported": true
    }
  }
}
```

### アプリの実装

アプリが`wallet_getCapabilities`レスポンスの`auxiliaryFunds`機能を介して、接続されたウォレットが補助的資金にアクセスできることを確認した場合、アプリはユーザーが資産残高チェックに基づいてアクションを取ることを阻止してはいけません。

## 根拠

### 代替案

#### 高度な残高取得

検討した別の案は、アプリが補助的残高を取得する方法を定義することです。これは、例えば`auxiliaryFunds`機能の一部としてURLを提供し、アプリがそれを使用して補助的残高情報を取得できるようにするなどの方法が考えられます。ただし、最終的には、ユーザーのアクションを残高チェックに基づいてブロックしないことをアプリに示すためには、ブール値で十分であり、アプリの実装にとって最小限の負担であると判断しました。

この機能の形式により、アプリがより多くの機能を必要と感じる場合に、より高度な拡張が可能になります。

#### 資産ごとの補助的資金

資産ごとの補助的資金サポートを指定することもできます。ただし、ウォレットが多くの資産について補助的資金サポートを持っている場合、このリストが非常に大きくなる可能性があり、単一のブール値で十分にアプリがユーザーのアクションをブロックしないことを示せると判断しました。

## セキュリティ上の考慮事項

アプリは、補助的資金の出所について、いかなる仮定も行ってはいけません。アプリのスマートコントラクトは、今日と同様に、トランザクション処理時にオンチェーンの適切な残高チェックを行う必要があります。

## 著作権

著作権およびそれに関連する権利は[CC0](../LICENSE.md)により放棄されています。