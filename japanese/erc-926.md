---
original: 6bde0b430744bb74c4f0caed3684c8367518e5aeb698c77f2149fd42c1f68447
---

---
eip: 926
title: アドレスメタデータレジストリ
author: Nick Johnson <nick@ethereum.org>
type: Standards Track
category: ERC
status: Stagnant
created: 2018-03-12
requires: 165
---

## 概要
このEIPは、アドレスメタデータのレジストリを指定しており、契約と外部アカウントの両方がオンチェーンおよびオフチェーンのコールに対してメタデータを提供できるようにします。これにより、一般化された承認、トークン受け入れ設定、クレームレジストリなどのユースケースが可能になります。

## 動機
アドレスに関連付けられたメタデータを保存する必要性が高まっています。例えば、EIP 777、EIP 780、EIP 181のENS逆引きレジストリなどがあります。現在、各ユースケースが独自のスペシャルパーパスレジストリを定義しています。特殊目的のレジストリ契約の増加を防ぐため、代わりに拡張可能なアーキテクチャを持つ単一の標準化されたレジストリを提案します。これにより、将来の標準がそれ自身のメタデータ標準を実装できるようになります。

## 仕様
メタデータレジストリには以下のインターフェースがあります:
```solidity
interface AddressMetadataRegistry {
  function provider(address target) view returns(address);
  function setProvider(address _provider);
}
```

`setProvider`は呼び出し元のアドレスに関連付けられるメタデータレジストリを指定し、`provider`は指定されたアドレスのメタデータレジストリのアドレスを返します。

メタデータレジストリは合意された Solidity のバージョンでコンパイルされ、信頼できる展開メカニズムを使用して、すべてのチェーンで複製できる固定アドレスにデプロイされます。

## プロバイダ仕様

プロバイダは、ここで指定されたメタデータレコードタイプのサブセットを実装できます。レコードタイプの仕様がプロバイダに複数の関数を提供することを要求する場合、プロバイダはそれらすべてまたはどれも実装しなければなりません。プロバイダは、サポートされていない関数 ID で呼び出された場合、例外を投げなければなりません。

プロバイダには1つの必須の関数があります:

```solidity
function supportsInterface(bytes4 interfaceID) constant returns (bool)
```

`supportsInterface`関数は[EIP-165](./eip-165.md)で文書化されており、提供された4バイトの識別子で指定されたインターフェースを実装している場合にtrueを返します。インターフェース識別子は、そのインターフェースが提供する関数シグネチャハッシュのXORで構成されます。単一関数インターフェースの場合は、単純にその関数のシグネチャハッシュと等しくなります。プロバイダが `supportsInterface()`に対してtrueを返す場合、そのインターフェースで指定された関数を実装しなければなりません。

`supportsInterface`は常に `0x01ffc9a7`、つまり `supportsInterface`自体のインターフェースIDに対してtrueを返さなければなりません。

すべてのプロバイダ関数の最初の引数は、クエリ対象のアドレスでなければなりません。これにより、マルチユーザープロバイダ契約の作成が容易になります。

現在標準化されているプロバイダインターフェースは、以下の表に示されています。

| インターフェース名 | インターフェースハッシュ | 仕様 |
| --- | --- | --- |

EIPは、このレジストリに追加する新しいインターフェースを定義できます。

## 根拠
一般的なメタデータレジストリには、ここで採用されている間接的なアプローチと、一般化されたキー/値ストアの2つの明らかなアプローチがあります。間接的なアプローチでは、追加の契約呼び出しのコストがかかり、時間とともにプロバイダを変更する必要がありますが、キー/値ストアよりも大幅に柔軟性が高くなります。そのため、このアプローチを選択しました。

## 下位互換性
下位互換性の問題はありません。

## 実装
メタデータレジストリの正規の実装は次のとおりです:
```solidity
contract AddressMetadataRegistry {
  mapping(address=>address) public provider;
  
  function setProvider(address _provider) {
    provider[msg.sender] = _provider;
  }
}
```

## 著作権
著作権およびそれに関連する権利は[CC0](../LICENSE.md)によって放棄されています。