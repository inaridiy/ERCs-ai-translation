---
original: 39ebc4ee846a2eb9267ef0dd1cd27b4e38049e317b8af3985c1649ba4cc25e08
---

---
eip: 1581
title: BIP-32 ツリーから派生したキーの非ウォレット使用
description: 暗号資産を保持することを目的としないキーペアを生成するための BIP32 ツリーの派生パス構造。
author: Michele Balistreri (@bitgamma)
discussions-to: https://ethereum-magicians.org/t/non-wallet-usage-of-keys-derived-from-bip-32-trees/1817
status: 停滞
type: Standards Track
category: ERC
created: 2018-11-13
---
## 概要
BIP32 は、共通のマスターキーから派生した階層的なキーツリーを生成する方法を定義しています。BIP32 と [BIP44](https://https://github.com/bitcoin/bips/blob/master/bip-0044.mediawiki) は、これらのキーをウォレットとして使用することを定義しています。このEIPでは、ブロックチェーンの範囲外でこのようなキーを使用する方法を説明し、既存の BIP44 互換ウォレットと共存(したがって同じマスターを共有)できる論理ツリーを定義します。

## 動機
ブロックチェーンと対話するアプリケーションは、設計された目的を達成するために、ブロックチェーン以外の技術も使用することがよくあります。プライバシーと安全性に敏感なメカニズムには、キーセットが必要です。ウォレットで使用されるキーを再利用すると安全でない可能性があり、完全に独立したキーを維持すると、資格情報全体のバックアップと移行がより複雑になります。BIP44 準拠のウォレットとは別の派生ブランチを定義することで、独立したキーのセキュリティと、バックアップや移行を単一の情報に集約できる利便性を組み合わせることができます。

## 仕様

### パスレベル
BIP32 パスに以下のレベルを定義します:

```m / purpose' / coin_type' / subpurpose' / key_type' / key_index```

パスの中のアポストロフィは、BIP32 ハード化された派生が使用されることを示します。

この構造は [BIP43](https://github.com/bitcoin/bips/blob/master/bip-0043.mediawiki) の推奨事項と [ビットコイン以外の使用のための修正](https://github.com/bitcoin/bips/pull/523/files) に従っています。各レベルには以下で説明する特別な意味があります。

### Purpose/Coin Type/Subpurpose
この部分は固定されており、```m / 43' / 60' / 1581'```に設定されています。つまり BIP 43 -> Ethereum -> このEIP。

このプレフィックス以下のすべてのサブツリーがこのEIPの範囲となります。

### キータイプ
キーが使用される目的を説明します。キータイプは一般的であるべきです。「インスタントメッセージング」は良い例ですが、「Whisper」は適切ではありません。その理由は、異なるサービス間で同じアイデンティティを使用できるようにしたいためです。キータイプは TBD で定義されます。

このレベルではハード化された派生が使用されます。

### キーインデックス
キーインデックスは、特定のキーを識別する可変長のフィールドです。最も単純な場合は、0から2^31-1までの数値です。より大きな識別子が必要な場合(ハッシュや GUID を表す場合など)、値を複数の BIP32 ネストレベルに分割する必要があります。最上位ビットから始め、左揃えで、必要に応じて 0 でビットパディングします。最後のレベルを除いて、すべてのレベルでハード化された派生を使用する必要があります。最後のレベルでは公開派生を使用する必要があります。つまり、各レベルで識別子の 31 ビットを表すことができます。

例えば、キータイプが 4'で、16進数 0x2BCDEFFEDCBAABCD の 62 ビット ID を表すキー_インデックスがあるとします。完全なキーパスは ```m / 43' / 60' / 1581' / 4' / ‭1469833213‬' / ‭1555737549‬ ```となります。ランダムな識別子を使用する場合は、標準的な GUID を生成するのが便利かもしれません。その場合、各 32 ビットワードの最上位ビットを 1 に固定し、最後のワードだけ 0 にします。

## 根拠
上記の提案された構造は BIP43 の一般的な構造に従っており、広く採用されている BIP44 仕様に似ています。

## 著作権
著作権およびそれに関連する権利は [CC0](../LICENSE.md) により放棄されています。