---
original: ef48e5ba06bd9ea0d0a0e4637066190e3029343ad4aa213122cef20e5704125a
---

---
eip: 6454
title: 最小限の転送可能なNFT検出インターフェース
description: 非代替性トークン(NFT)の転送可能性を識別するための最小限の拡張機能。
author: Bruno Škvorc (@Swader), Francesco Sullo (@sullof), Steven Pineda (@steven2308), Stevan Bogosavljevic (@stevyhacker), Jan Turk (@ThunderDeliverer)
discussions-to: https://ethereum-magicians.org/t/minimalistic-transferable-interface/12517
status: 最終
type: Standards Track
category: ERC
created: 2023-01-31
requires: 165, 721
---

## 概要

非代替性トークン(NFT)の最小限の転送可能インターフェースは、NFTが転送可能かどうかを識別する機能を[ERC-721](./eip-721.md)に導入します。

このプロポーザルは、トークンが所有者、抽象アカウント、スマートコントラクト、またはトークンが所有するものから転送されないようにする機能を導入します。

## 動機

NFTがイーサリアムエコシステムで広く使用されるトークンの形態であり、さまざまなユースケースに使用されているため、それらの追加的な機能性を標準化する時期が来ています。トークンの転送を防ぐ機能を持つことで、NFTの機能性と進化の新しい可能性が生まれます。

このプロポーザルは、このプロポーザルを利用したいあらゆるユースケースと互換性を持つよう、可能な限り最小限に設計されています。

このEIPは、[ERC-721](./eip-721.md)ベースのトークンに以下の分野での新しい機能性を導入します:

- [検証可能な帰属](#検証可能な帰属)
- [不変の特性](#不変の特性)

### 検証可能な帰属

個人の業績を表すことができる非代替性トークンがあります。これらのトークンは、科学的な進歩、慈善活動、スポーツの業績など、さまざまな業績を表すために使用できます。しかし、これらの業績を示すNFTが簡単に転送できる場合、その真正性と信頼性が疑問視される可能性があります。NFTを特定のアカウントにバインドすることで、NFTを所有するアカウントが実際に対応する業績を達成したことを確認できます。これにより、個人の業績の信頼性の高い記録が作成され、ネットワーク内で簡単にアクセスして認識できるようになります。帰属の検証は、業績を示すNFTの信頼性と価値を高めるのに役立ちます。

### 不変の特性

NFTの特性は、非代替性トークンを互いに区別し、その希少性を確立する上で重要な側面です。しかし、発行者による NFT の特性の集中管理は、これらの特性の独自性を損なう可能性があります。

NFTを特定の特性にバインドすることで、オリジナルの所有者は NFTがこれらの特性と独自性を常に維持することが保証されます。

非転送可能なNFTを使ってスキルや能力を表すブロックチェーンゲームでは、各スキルが固有かつ永続的な資産として特定のプレイヤーまたはトークンにバインドされます。これにより、プレイヤーがこれまで獲得したスキルの所有権を維持し、他のプレイヤーに取引や売却されるのを防ぐことができます。これにより、これらのスキルの価値が高まり、キャラクターのカスタマイズと個性化を通じてプレイヤー体験が向上します。

## 仕様

この文書の「MUST」、「MUST NOT」、「REQUIRED」、「SHALL」、「SHALL NOT」、「SHOULD」、「SHOULD NOT」、「RECOMMENDED」、「MAY」、「OPTIONAL」というキーワードは、RFC 2119に記載されているように解釈されるものとします。

```solidity
/// @title EIP-6454 Minimalistic Non-Transferable interface for NFTs
/// @dev See https://eips.ethereum.org/EIPS/eip-6454
/// @dev Note: the ERC-165 identifier for this interface is 0x91a6262f.

pragma solidity ^0.8.16;

interface IERC6454 /* is IERC165 */ {
    /**
     * @notice Used to check whether the given token is transferable or not.
     * @dev If this function returns `false`, the transfer of the token MUST revert execution.
     * @dev If the tokenId does not exist, this method MUST revert execution, unless the token is being checked for
     *  minting.
     * @dev The `from` parameter MAY be used to also validate the approval of the token for transfer, but anyone
     *  interacting with this function SHOULD NOT rely on it as it is not mandated by the proposal.
     * @param tokenId ID of the token being checked
     * @param from Address from which the token is being transferred
     * @param to Address to which the token is being transferred
     * @return Boolean value indicating whether the given token is transferable
     */
    function isTransferable(uint256 tokenId, address from, address to) external view returns (bool);
}
```

一般的にトークンが転送可能かどうかを判断するには、`to`と`from`パラメーターに`0x0000000000000000000000000000000000000000`アドレスを渡して適切なブール値を返すべきです。

トークンの一般的な転送可能性は、トークンのミント(from パラメーターが`0x0000000000000000000000000000000000000000`)やバーン(to パラメーターが`0x0000000000000000000000000000000000000000`)の能力によって影響を受けるべきではありません。

トークンの一般的な転送可能性が`false`の場合、ミントとバーンを除くトークンの転送はすべて実行を中止しなければなりません。

トークンがミント可能かどうかを判断するには、存在しないトークンIDのパラメーターを許可する例外を設ける必要があります。さらに、`from`パラメーターは`0x0000000000000000000000000000000000000000`であり、`to`パラメーターは`0x0000000000000000000000000000000000000000`ではないはずです。

トークンがバーン可能かどうかを判断するには、`from`パラメーターは`0x0000000000000000000000000000000000000000`ではなく、`to`パラメーターは`0x0000000000000000000000000000000000000000`である必要があります。

実装者は、`from`パラメーターによるトークンの転送承認を検証してもよいですが、このプロポーザルでは義務付けられていないため、この機能に依存してはいけません。つまり、そのような実装では`from`パラメーターはトランザクションの開始者を検証しますが、トークンの所有者(トークンの所有者またはトークンの転送を許可されたオペレーター)ではありません。

## 根拠

このプロポーザルを設計する際、以下の点を考慮しました:

1. **既存の(非)転送可能なNFTプロポーザルが存在し、一部は最終版であるにもかかわらず、なぜ別のプロポーザルを提案するのか、そしてこのプロポーザルはそれらとどのように比較されるか?**\
   このプロポーザルは、非転送可能なNFTの実装に必要な最小限の仕様を提供することを目的としています。既存のプロポーザルでは、この最小限の必要なインターフェースが提示されていないと感じています。他の同様の問題に取り組むプロポーザルとは異なり、このプロポーザルは仕様に必要な少ない数のメソッドを要求し、より簡潔なソリューションを提供しています。
2. **なぜこのインターフェースにはトークンが非転送可能になったことを示すイベントがないのか?**\
   トークンは作成時、非転送可能にマークされた後、または特定の条件が満たされた後に非転送可能になる可能性があります。これは、ブロック番号によってトークンが非転送可能になる場合のように、トークンが非転送可能になるときにイベントを発行できない場合があることを意味します。トークンが非転送可能になったときにイベントの発行を要求するのは現実的ではありません。
3. **転送可能性状態管理機能をこのプロポーザルに含めるべきですか?**\
   トークンを非転送可能にしたり、バインディングを解除したりする機能は、転送可能性管理機能と呼ばれます。最小限の転送可能なプロポーザルを設計するという目的を維持するために、転送可能性管理機能を指定しないことにしました。これにより、トークンを非転送可能にする必要がある様々なカスタム実装が可能になります。
4. **なぜこれがEIPであるべきか、1つのメソッドしか含まれていないのに?**\
   このプロポーザルの核心は、ERC-721トークンの転送を防ぐことだけであり、transfer関数をオーバーライドすればできるという議論もあるかもしれません。これは正しいですが、スマートコントラクトの実行前にトークンが非転送可能であることを確認する唯一の方法は、転送可能なインターフェースを持つことです。\
   これにより、スマートコントラクトがトークンが非転送可能であることを検証し、転送を試みないようにすることができ、失敗したトランザクションとガスの無駄を避けられます。
5. **`tokenId`パラメーターのみを受け入れる最も単純なメソッドを含めるべきですか?**\
   提案の初期バージョンには、`tokenId`パラメーターのみを受け入れるメソッドが含まれていました。このメソッドはトークンが転送可能かどうかを示すブール値を返します。しかし、トークンが異なる理由で非転送可能になる可能性があることが議論の中で指摘されました。これが、メソッドにさらにパラメーターを追加し、より柔軟な実装を可能にした理由です。さらに、元のメソッドの機能性を維持するために、同じ結果を得る方法を指定しました(to パラメーターとfromパラメーターに`0x0000000000000000000000000000000000000000`アドレスを渡す)。
6. **フロントエンドにとって最良のユーザー体験は何か?**\
   フロントエンドにとって最良のユーザー体験は、トークンが転送可能かどうかを確認する単一のメソッドを持つことです。このメソッドは、一般的な転送可能性と条件付きの転送可能性の両方のケースを処理する必要があります。\
   フロントエンドは、トークンが非転送可能で転送が試みられた場合にも対応できる必要があります。これは、transfer関数の返り値をチェックすることで行えます。返り値がfalseの場合、トークンが非転送可能であることを意味します。トークンが単に非転送可能に設定されただけで、トークンが転送可能かどうかを標準化されたインターフェースでチェックする方法がない場合、トランザクションがリバートするかどうかをガス計算を試みることでしか確認できません。これは良くないユーザー体験であり、避けるべきです。
7. **`isTransferable`が承認の検証も義務付けるべきですか?**\
   `from`パラメーターがトークン転送の開始者を表すことを指定することを検討しました。つまり、`from`はトークンの所有者または承認された転送者であるかどうかを検証することになります。これには利点があるかもしれませんが、最終的にはオプションとしました。\
   このプロポーザルは最小限の実装を目的としており、承認はすでに標準化されているため、`isTransferable`を承認の検証と組み合わせて使用できると感じています。\
   さらに、承認の検証を義務付けると、追加の検証が必要になるため、ガス消費が増加します。

## 下位互換性

最小限の非転送可能トークン標準は、[ERC-721](./eip-721.md)と完全に互換性があり、ERC-721の実装に利用可能なロバストなツールや既存のERC-721インフラストラクチャとも互換性があります。

## テストケース

テストは[`transferable.ts`](../assets/eip-6454/test/transferable.ts)に含まれています。

ターミナルでそれらを実行するには、以下のコマンドを使用できます:

```
cd ../assets/eip-6454
npm install
npx hardhat test
```

## 参考実装

[`ERC721TransferableMock.sol`](../assets/eip-6454/contracts/mocks/ERC721TransferableMock.sol)を参照してください。

## セキュリティ上の考慮事項

[ERC-721](./eip-721.md)と同様のセキュリティ上の考慮事項が適用されます。つまり、バーン、アセットの追加、アセット
の受け入れなどの機能に隠れたロジックが存在する可能性があります。

スマートコントラクトがこのプロポーザルのインターフェースを実装しつつ、不正な値を返す可能性があります。つまり、トークンが転送可能であるにもかかわらず、`isTransferable`が`false`を返す可能性があります。そのようなコントラクトは、トークンが非転送可能であると他のコントラクトを欺くことになります。そのようなコントラクトが存在する場合、そのコントラクトとやり取りしないことをお勧めします。[ERC-20](./eip-20.md)や[ERC-721](./eip-721.md)の不正なスマートコントラクトと同様に、そのようなコントラクトの存在を防ぐことはできません。相互作用するすべての外部スマートコントラクトを検証し、信頼できないコントラクトとは相互作用しないことをお勧めします。

トークンの転送可能性の状態は時間とともに変化する可能性があるため、トークンを表示する前にその状態を常に確認することが不可欠です。したがって、このインターフェースを実装するdApp、マーケットプレイス、またはウォレットは、トークンを表示するたびにトークンの状態を検証する必要があります。

監査されていないコントラクトを扱う際は注意が必要です。

## 著作権

著作権およびそれに関連する権利は[CC0](../LICENSE.md)によって放棄されています。